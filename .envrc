#!/usr/bin/env bash
# ~~ Generated by projen. To modify, edit .projenrc.ts and run "npx projen".

# Team Shared direnv.
# See: https://github.com/direnv/direnv

# Enforces `set -euo pipefail` despite user local config.
strict_env

# forces "at least"
direnv_version 2.32.1

# User local additions.
source_env_if_exists .envrc.local

# Load mise (previously known as "rtx") or asdf
if has mise && has use_mise; then
  use mise
elif has rtx && has use_rtx; then
  log_status "Note: rtx was renamed to mise. Consider migrating your local rtx config to mise. https://mise.jdx.dev/rtx.html"
  use rtx
elif has asdf && has use_asdf; then
  log_status "mise/rtx not found. Falling back to asdf."
  use asdf
else
  log_error "Neither mise (rtx) nor asdf are installed or integrated with direnv."
  log_error "For asdf: https://asdf-vm.com/"
  log_error "For mise (asdf clone in rust): https://github.com/jdx/mise"
fi

layout node

# Docker
export COMPOSE_DOCKER_CLI_BUILD=1
export DOCKER_BUILDKIT=1

# Required Env Vars for this project
export NPM_TOKEN="${NPM_TOKEN:-}"
# NX Access Token (can override with write-enabled token)
export NX_CLOUD_ACCESS_TOKEN="${NX_CLOUD_ACCESS_TOKEN:-NTc0NTE5MGItNjY3Ni00YmQzLTg0YTUtNWFkMzc5ZWZiY2Y4fHJlYWQtb25seQ==}"