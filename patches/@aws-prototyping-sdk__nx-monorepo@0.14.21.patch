diff --git a/lib/nx-monorepo.d.ts b/lib/nx-monorepo.d.ts
index 4b2fbe9368f9b935b2c61e030b5a7fae0f7fe339..88e8581f16aa20dfdfcfe53a05dce93f99a22071 100644
--- a/lib/nx-monorepo.d.ts
+++ b/lib/nx-monorepo.d.ts
@@ -28,6 +28,14 @@ export interface WorkspaceConfig {
      * @default false
      */
     readonly disableNoHoistBundled?: boolean;
+    /**
+     * Links all local workspace project bins so they can be used for local development.
+     *
+     * Package bins are only linked when installed from the registry, however it is very useful
+     * for monorepo development to also utilize these bin scripts. When enabled, this flag will
+     * recursively link all bins from packages.json files to the root node_modules/.bin.
+     */
+    readonly linkLocalWorkspaceBins?: boolean;
     /**
      * List of additional package globs to include in the workspace.
      *
@@ -125,12 +133,19 @@ export interface NxRunManyOptions {
  * @pjid nx-monorepo
  */
 export declare class NxMonorepoProject extends TypeScriptProject {
-    private readonly implicitDependencies;
     private readonly nxConfig?;
     private readonly workspaceConfig?;
     private readonly workspacePackages;
     private readonly nxJson;
+    private readonly _options;
     constructor(options: NxMonorepoProjectOptions);
+    /**
+     * Ensure NXProject is added when adding subprojects to the monorepo.
+     *
+     * @internal
+     * @param subproject project to add.
+     */
+    _addSubProject(subproject: Project): void;
     /**
      * Helper to format `npx nx run-many ...` style command.
      * @param options
@@ -156,8 +171,9 @@ export declare class NxMonorepoProject extends TypeScriptProject {
      *
      * @param dependent project you want to have the dependency.
      * @param dependee project you wish to depend on.
+     * @throws error if this is called on a dependent which does not have a NXProject component attached.
      */
-    addImplicitDependency(dependent: Project, dependee: Project): void;
+    addImplicitDependency(dependent: Project, dependee: Project | string): void;
     /**
      * Add one or more additional package globs to the workspace.
      * @param packageGlobs paths to the package to include in the workspace (for example packages/my-package)
@@ -165,6 +181,12 @@ export declare class NxMonorepoProject extends TypeScriptProject {
     addWorkspacePackages(...packageGlobs: string[]): void;
     private get instantiationOrderSubProjects();
     get subProjects(): Project[];
+    /**
+     * Create symbolic links to all local workspace bins. This enables the usage of bins the same
+     * way as consumers of the packages have when installing from the registry.
+     */
+    protected linkLocalWorkspaceBins(): void;
+    preSynthesize(): void;
     /**
      * @inheritDoc
      */
@@ -173,10 +195,6 @@ export declare class NxMonorepoProject extends TypeScriptProject {
      * Ensures subprojects don't have a default task and that all packages use the same package manager.
      */
     private validateSubProjects;
-    /**
-     * For non-node projects, a package.json is required in order to be discovered by NX.
-     */
-    private synthesizeNonNodePackageJson;
     /**
      * Add a submodule entry to the appropriate workspace file.
      */
diff --git a/lib/nx-monorepo.js b/lib/nx-monorepo.js
index 12e71c152aff7b2d9647821926ec1d1bee1734d7..e16e3c78dd89c27d577483379aed174953570ba6 100644
--- a/lib/nx-monorepo.js
+++ b/lib/nx-monorepo.js
@@ -5,14 +5,13 @@ exports.NxMonorepoProject = exports.buildExecutableCommand = void 0;
 const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
 /*! Copyright [Amazon.com](http://amazon.com/), Inc. or its affiliates. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0 */
-const fs = require("fs");
 const path = require("path");
 const projen_1 = require("projen");
 const javascript_1 = require("projen/lib/javascript");
 const python_1 = require("projen/lib/python");
 const typescript_1 = require("projen/lib/typescript");
+const nx_project_1 = require("./nx-project");
 const syncpack_options_1 = require("./syncpack-options");
-const NX_MONOREPO_PLUGIN_PATH = ".nx/plugins/nx-monorepo-plugin.js";
 /**
  * Execute command to run based on package manager configured.
  *
@@ -20,17 +19,29 @@ const NX_MONOREPO_PLUGIN_PATH = ".nx/plugins/nx-monorepo-plugin.js";
  * @param args args to append.
  */
 function buildExecutableCommand(packageManager, ...args) {
+    const argLiteral = args.length > 0 ? ` ${args.join(" ")}` : "";
     switch (packageManager) {
         case javascript_1.NodePackageManager.YARN:
         case javascript_1.NodePackageManager.YARN2:
-            return `yarn ${args.join(" ")}`;
+            return `yarn${argLiteral}`;
         case javascript_1.NodePackageManager.PNPM:
-            return `pnpx ${args.join(" ")}`;
+            return `pnpx${argLiteral}`;
         default:
-            return `npx ${args.join(" ")}`;
+            return `npx${argLiteral}`;
     }
 }
 exports.buildExecutableCommand = buildExecutableCommand;
+function binCommand(packageManager) {
+    switch (packageManager) {
+        case javascript_1.NodePackageManager.YARN:
+        case javascript_1.NodePackageManager.YARN2:
+            return `yarn bin`;
+        case javascript_1.NodePackageManager.PNPM:
+            return `pnpm bin`;
+        default:
+            return `npm bin`;
+    }
+}
 /**
  * This project type will bootstrap a NX based monorepo with support for polygot
  * builds, build caching, dependency graph visualization and much more.
@@ -61,10 +72,28 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
                 include: ["**/*.ts"],
             },
         });
+        this._options = options;
+        // engines
+        this.package.addEngine("node", ">=16");
+        switch (this.package.packageManager) {
+            case javascript_1.NodePackageManager.PNPM: {
+                // https://pnpm.io/package_json
+                // https://github.com/pnpm/pnpm/releases/tag/v8.0.0
+                this.package.addEngine("pnpm", ">=8");
+                break;
+            }
+            case javascript_1.NodePackageManager.YARN: {
+                this.package.addEngine("yarn", ">=1 <2");
+                break;
+            }
+            case javascript_1.NodePackageManager.YARN2: {
+                this.package.addEngine("yarn", ">=2 <3");
+                break;
+            }
+        }
         this.nxConfig = options.nxConfig;
         this.workspaceConfig = options.workspaceConfig;
         this.workspacePackages = options.workspaceConfig?.additionalPackages ?? [];
-        this.implicitDependencies = this.nxConfig?.implicitDependencies || {};
         // Never publish a monorepo root package.
         this.package.addField("private", true);
         // Add alias task for "projen" to synthesize workspace
@@ -75,8 +104,16 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
         this.addTask("run-many", {
             receiveArgs: true,
             exec: buildExecutableCommand(this.package.packageManager, "nx", "run-many"),
+            env: {
+                NX_NON_NATIVE_HASHER: "true",
+            },
             description: "Run task against multiple workspace projects",
         });
+        this.addTask("graph", {
+            receiveArgs: true,
+            exec: buildExecutableCommand(this.package.packageManager, "nx", "graph"),
+            description: "Generate dependency graph for monorepo",
+        });
         // Map tasks to nx run-many
         if (options.scripts == null || options.scripts.build == null) {
             this._overrideNxBuildTask(this.buildTask, { target: "build" }, true);
@@ -131,14 +168,9 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
         options.nxConfig?.nxCloudReadOnlyAccessToken &&
             this.addDevDeps("@nrwl/nx-cloud");
         new projen_1.IgnoreFile(this, ".nxignore").exclude("test-reports", "target", ".env", ".pytest_cache", ...(this.nxConfig?.nxIgnore || []));
-        new projen_1.TextFile(this, NX_MONOREPO_PLUGIN_PATH, {
-            readonly: true,
-            lines: fs.readFileSync(getPluginPath()).toString("utf-8").split("\n"),
-        });
         this.nxJson = new projen_1.JsonFile(this, "nx.json", {
             obj: {
                 extends: "@nrwl/workspace/presets/npm.json",
-                plugins: [`./${NX_MONOREPO_PLUGIN_PATH}`],
                 npmScope: "monorepo",
                 tasksRunnerOptions: {
                     default: {
@@ -161,7 +193,6 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
                     ...options.nxConfig?.namedInputs,
                 },
                 targetDefaults: options.nxConfig?.targetDefaults,
-                implicitDependencies: this.implicitDependencies,
                 targetDependencies: {
                     build: [
                         {
@@ -177,6 +208,17 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
             },
         });
     }
+    /**
+     * Ensure NXProject is added when adding subprojects to the monorepo.
+     *
+     * @internal
+     * @param subproject project to add.
+     */
+    _addSubProject(subproject) {
+        !nx_project_1.NxProject.of(subproject) &&
+            subproject._addComponent(new nx_project_1.NxProject(subproject));
+        super._addSubProject(subproject);
+    }
     /**
      * Helper to format `npx nx run-many ...` style command.
      * @param options
@@ -235,6 +277,8 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
             receiveArgs: true,
         });
         task.description += " for all affected projects";
+        // Fix for https://github.com/nrwl/nx/pull/15071
+        task.env("NX_NON_NATIVE_HASHER", "true");
         return task;
     }
     /**
@@ -244,6 +288,9 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
         return this.addTask(name, {
             receiveArgs: true,
             exec: this.formatNxRunManyCommand(options),
+            env: {
+                NX_NON_NATIVE_HASHER: "true",
+            },
         });
     }
     /**
@@ -253,13 +300,15 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
      *
      * @param dependent project you want to have the dependency.
      * @param dependee project you wish to depend on.
+     * @throws error if this is called on a dependent which does not have a NXProject component attached.
      */
     addImplicitDependency(dependent, dependee) {
-        if (this.implicitDependencies[dependent.name]) {
-            this.implicitDependencies[dependent.name].push(dependee.name);
+        const nxProject = nx_project_1.NxProject.of(dependent);
+        if (!nxProject) {
+            throw new Error(`${dependent.name} does not have an NXProject associated.`);
         }
         else {
-            this.implicitDependencies[dependent.name] = [dependee.name];
+            nxProject.addImplicitDependency(dependee);
         }
     }
     /**
@@ -284,6 +333,46 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
     get subProjects() {
         return this.instantiationOrderSubProjects.sort((a, b) => a.name.localeCompare(b.name));
     }
+    /**
+     * Create symbolic links to all local workspace bins. This enables the usage of bins the same
+     * way as consumers of the packages have when installing from the registry.
+     */
+    linkLocalWorkspaceBins() {
+        const bins = [];
+        this.subProjects.forEach((subProject) => {
+            if (subProject instanceof javascript_1.NodeProject) {
+                const pkgBins = subProject.package.manifest.bin() || {};
+                bins.push(...Object.entries(pkgBins).map(([cmd, bin]) => {
+                    const resolvedBin = path.join("$PWD", path.relative(this.outdir, subProject.outdir), bin);
+                    return [cmd, resolvedBin];
+                }));
+            }
+        });
+        const linkTask = this.addTask("workspace:bin:link", {
+            steps: bins.map(([cmd, bin]) => ({
+                exec: `ln -s ${bin} $(${binCommand(this.package.packageManager)})/${cmd} &>/dev/null; exit 0;`,
+            })),
+        });
+        (this.tasks.tryFind("prepare") || this.addTask("prepare")).spawn(linkTask);
+    }
+    preSynthesize() {
+        super.preSynthesize();
+        if (this._options.workspaceConfig?.linkLocalWorkspaceBins === true) {
+            this.linkLocalWorkspaceBins();
+        }
+        if (this.package.packageManager === javascript_1.NodePackageManager.PNPM) {
+            // PNPM hoisting hides transitive bundled dependencies which results in
+            // transitive dependencies being packed incorrectly.
+            this.subProjects.forEach((subProject) => {
+                if (isNodeProject(subProject) && getBundledDeps(subProject).length) {
+                    const pkgFolder = path.relative(this.root.outdir, subProject.outdir);
+                    // Create a symlink in the sub-project node_modules for all transitive deps
+                    // before running "package" task
+                    subProject.packageTask.prependExec(`pdk@pnpm-link-bundled-transitive-deps ${pkgFolder}`);
+                }
+            });
+        }
+    }
     /**
      * @inheritDoc
      */
@@ -291,7 +380,6 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
         this.validateSubProjects();
         this.updateWorkspace();
         this.wirePythonDependencies();
-        this.synthesizeNonNodePackageJson();
         // Prevent sub NodeProject packages from `postSynthesis` which will cause individual/extraneous installs.
         // The workspace package install will handle all the sub NodeProject packages automatically.
         const subProjectPackages = [];
@@ -304,7 +392,7 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
             }
         });
         super.synth();
-        // Force workspace install deps if any node subproject package has change, unless the workspace changed
+        // Force workspace install deps if any node subproject package has changed, unless the workspace changed
         if (
         // @ts-ignore - `file` is private
         this.package.file.changed !== true &&
@@ -327,32 +415,6 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
             }
         });
     }
-    /**
-     * For non-node projects, a package.json is required in order to be discovered by NX.
-     */
-    synthesizeNonNodePackageJson() {
-        this.subProjects
-            .filter((subProject) => !isNodeProject(subProject))
-            .filter((subProject) => !subProject.tryFindFile("package.json"))
-            .forEach((subProject) => {
-            // generate a package.json if not found
-            const manifest = {
-                name: subProject.name,
-                private: true,
-                __pdk__: true,
-                devDependencies: { projen: "*" },
-                scripts: subProject.tasks.all.reduce((p, c) => ({
-                    [c.name]: `${buildExecutableCommand(this.package.packageManager)} projen ${c.name}`,
-                    ...p,
-                }), {}),
-                version: "0.0.0",
-            };
-            new projen_1.JsonFile(subProject, "package.json", {
-                obj: manifest,
-                readonly: true,
-            });
-        });
-    }
     /**
      * Add a submodule entry to the appropriate workspace file.
      */
@@ -365,9 +427,7 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
         if (this.workspaceConfig?.disableNoHoistBundled !== true) {
             const noHoistBundled = this.subProjects.flatMap((sub) => {
                 if (sub instanceof javascript_1.NodeProject) {
-                    return sub.deps.all
-                        .filter((dep) => dep.type === projen_1.DependencyType.BUNDLED)
-                        .flatMap((dep) => [
+                    return getBundledDeps(sub).flatMap((dep) => [
                         `${sub.name}/${dep.name}`,
                         `${sub.name}/${dep.name}/*`,
                     ]);
@@ -453,7 +513,7 @@ class NxMonorepoProject extends typescript_1.TypeScriptProject {
 }
 exports.NxMonorepoProject = NxMonorepoProject;
 _a = JSII_RTTI_SYMBOL_1;
-NxMonorepoProject[_a] = { fqn: "@aws-prototyping-sdk/nx-monorepo.NxMonorepoProject", version: "0.14.21" };
+NxMonorepoProject[_a] = { fqn: "@aws-prototyping-sdk/nx-monorepo.NxMonorepoProject", version: "0.0.0" };
 /**
  * Determines if the passed in project is of type NodeProject.
  *
@@ -463,7 +523,10 @@ NxMonorepoProject[_a] = { fqn: "@aws-prototyping-sdk/nx-monorepo.NxMonorepoProje
 function isNodeProject(project) {
     return project instanceof javascript_1.NodeProject || project.package;
 }
-function getPluginPath() {
-    return path.join(__dirname, "plugin/nx-monorepo-plugin.js");
+/**
+ * Gets bundled dependencies for a given project
+ */
+function getBundledDeps(project) {
+    return project.deps.all.filter((dep) => dep.type === projen_1.DependencyType.BUNDLED);
 }
-//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibngtbW9ub3JlcG8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbngtbW9ub3JlcG8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtzQ0FDc0M7QUFDdEMseUJBQXlCO0FBQ3pCLDZCQUE2QjtBQUM3QixtQ0FTZ0I7QUFDaEIsc0RBSStCO0FBQy9CLDhDQUFrRDtBQUNsRCxzREFHK0I7QUFFL0IseURBQW9FO0FBRXBFLE1BQU0sdUJBQXVCLEdBQVcsbUNBQW1DLENBQUM7QUFFNUU7Ozs7O0dBS0c7QUFDSCxTQUFnQixzQkFBc0IsQ0FDcEMsY0FBa0MsRUFDbEMsR0FBRyxJQUFjO0lBRWpCLFFBQVEsY0FBYyxFQUFFO1FBQ3RCLEtBQUssK0JBQWtCLENBQUMsSUFBSSxDQUFDO1FBQzdCLEtBQUssK0JBQWtCLENBQUMsS0FBSztZQUMzQixPQUFPLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ2xDLEtBQUssK0JBQWtCLENBQUMsSUFBSTtZQUMxQixPQUFPLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ2xDO1lBQ0UsT0FBTyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztLQUNsQztBQUNILENBQUM7QUFiRCx3REFhQztBQTRIRDs7Ozs7R0FLRztBQUNILE1BQWEsaUJBQWtCLFNBQVEsOEJBQWlCO0lBV3RELFlBQVksT0FBaUM7UUFDM0MsS0FBSyxDQUFDO1lBQ0osR0FBRyxPQUFPO1lBQ1YsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNLElBQUksS0FBSztZQUMvQixPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU8sSUFBSSxLQUFLO1lBQ2pDLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUSxJQUFJLElBQUk7WUFDbEMsVUFBVSxFQUFFLElBQUk7WUFDaEIsT0FBTyxFQUFFLE9BQU8sQ0FBQyxPQUFPLElBQUksS0FB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QUMsT0FBTyxDQUFDLENBQUM7U0FDNUI7SUFDSCxDQUFDOztBQXJoQkgsOENBc2hCQzs7O0FBRUQ7Ozs7O0dBS0c7QUFDSCxTQUFTLGFBQWEsQ0FBQyxPQUFZO0lBQ2pDLE9BQU8sT0FBTyxZQUFZLHdCQUFXLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUMzRCxDQUFDO0FBRUQsU0FBUyxhQUFhO0lBQ3BCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsOEJBQThCLENBQUMsQ0FBQztBQUM5RCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyohIENvcHlyaWdodCBbQW1hem9uLmNvbV0oaHR0cDovL2FtYXpvbi5jb20vKSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wICovXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7XG4gIERlcGVuZGVuY3lUeXBlLFxuICBJZ25vcmVGaWxlLFxuICBKc29uRmlsZSxcbiAgUHJvamVjdCxcbiAgVGFzayxcbiAgVGFza1N0ZXAsXG4gIFRleHRGaWxlLFxuICBZYW1sRmlsZSxcbn0gZnJvbSBcInByb2plblwiO1xuaW1wb3J0IHtcbiAgTm9kZVBhY2thZ2UsXG4gIE5vZGVQYWNrYWdlTWFuYWdlcixcbiAgTm9kZVByb2plY3QsXG59IGZyb20gXCJwcm9qZW4vbGliL2phdmFzY3JpcHRcIjtcbmltcG9ydCB7IFB5dGhvblByb2plY3QgfSBmcm9tIFwicHJvamVuL2xpYi9weXRob25cIjtcbmltcG9ydCB7XG4gIFR5cGVTY3JpcHRQcm9qZWN0LFxuICBUeXBlU2NyaXB0UHJvamVjdE9wdGlvbnMsXG59IGZyb20gXCJwcm9qZW4vbGliL3R5cGVzY3JpcHRcIjtcbmltcG9ydCB7IE54IH0gZnJvbSBcIi4vbngtdHlwZXNcIjtcbmltcG9ydCB7IERFRkFVTFRfQ09ORklHLCBTeW5jcGFja0NvbmZpZyB9IGZyb20gXCIuL3N5bmNwYWNrLW9wdGlvbnNcIjtcblxuY29uc3QgTlhfTU9OT1JFUE9fUExVR0lOX1BBVEg6IHN0cmluZyA9IFwiLm54L3BsdWdpbnMvbngtbW9ub3JlcG8tcGx1Z2luLmpzXCI7XG5cbi8qKlxuICogRXhlY3V0ZSBjb21tYW5kIHRvIHJ1biBiYXNlZCBvbiBwYWNrYWdlIG1hbmFnZXIgY29uZmlndXJlZC5cbiAqXG4gKiBAcGFyYW0gcGFja2FnZU1hbmFnZXIgcGFja2FnZSBtYW5hZ2VyIGJlaW5nIHVzZWQuXG4gKiBAcGFyYW0gYXJncyBhcmdzIHRvIGFwcGVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRXhlY3V0YWJsZUNvbW1hbmQoXG4gIHBhY2thZ2VNYW5hZ2VyOiBOb2RlUGFja2FnZU1hbmFnZXIsXG4gIC4uLmFyZ3M6IHN0cmluZ1tdXG4pIHtcbiAgc3dpdGNoIChwYWNrYWdlTWFuYWdlcikge1xuICAgIGNhc2UgTm9kZVBhY2thZ2VNYW5hZ2VyLllBUk46XG4gICAgY2FzZSBOb2RlUGFja2FnZU1hbmFnZXIuWUFSTjI6XG4gICAgICByZXR1cm4gYHlhcm4gJHthcmdzLmpvaW4oXCIgXCIpfWA7XG4gICAgY2FzZSBOb2RlUGFja2FnZU1hbmFnZXIuUE5QTTpcbiAgICAgIHJldHVybiBgcG5weCAke2FyZ3Muam9pbihcIiBcIil9YDtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGBucHggJHthcmdzLmpvaW4oXCIgXCIpfWA7XG4gIH1cbn1cblxuLyoqXG4gKiBXb3Jrc3BhY2UgY29uZmlndXJhdGlvbnMuXG4gKlxuICogQHNlZSBodHRwczovL2NsYXNzaWMueWFybnBrZy5jb20vbGFuZy9lbi9kb2NzL3dvcmtzcGFjZXMvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV29ya3NwYWNlQ29uZmlnIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgcGFja2FnZSBnbG9icyB0byBleGNsdWRlIGZyb20gaG9pc3RpbmcgaW4gdGhlIHdvcmtzcGFjZS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2NsYXNzaWMueWFybnBrZy5jb20vYmxvZy8yMDE4LzAyLzE1L25vaG9pc3QvXG4gICAqL1xuICByZWFkb25seSBub0hvaXN0Pzogc3RyaW5nW107XG5cbiAgLyoqXG4gICAqIERpc2FibGUgYXV0b21hdGljYWxseSBhcHBseWluZyBgbm9Ib2lzdGAgbG9naWMgZm9yIGFsbCBzdWItcHJvamVjdCBcImJ1bmRsZWREZXBlbmRlbmNpZXNcIi5cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHJlYWRvbmx5IGRpc2FibGVOb0hvaXN0QnVuZGxlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgYWRkaXRpb25hbCBwYWNrYWdlIGdsb2JzIHRvIGluY2x1ZGUgaW4gdGhlIHdvcmtzcGFjZS5cbiAgICpcbiAgICogQWxsIHBhY2thZ2VzIHdoaWNoIGFyZSBwYXJlbnRlZCBieSB0aGUgbW9ub3JlcG8gYXJlIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIHdvcmtzcGFjZSwgYnV0IHlvdSBjYW4gdXNlIHRoaXNcbiAgICogcHJvcGVydHkgdG8gc3BlY2lmeSBhbnkgYWRkaXRpb25hbCBwYXRocyB0byBwYWNrYWdlcyB3aGljaCBtYXkgbm90IGJlIG1hbmFnZWQgYnkgcHJvamVuLlxuICAgKi9cbiAgcmVhZG9ubHkgYWRkaXRpb25hbFBhY2thZ2VzPzogc3RyaW5nW107XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBmb3IgTW9ub3JlcG8gVXBncmFkZSBEZXBzIHRhc2suXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTW9ub3JlcG9VcGdyYWRlRGVwc09wdGlvbnMge1xuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdGFzayB0byBjcmVhdGUuXG4gICAqXG4gICAqIEBkZWZhdWx0IHVwZ3JhZGUtZGVwc1xuICAgKi9cbiAgcmVhZG9ubHkgdGFza05hbWU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFN5bmNwYWNrIGNvbmZpZ3VyYXRpb24uXG4gICAqXG4gICAqIE5vIG1lcmdpbmcgaXMgcGVyZm9ybWVkIGFuZCBhcyBzdWNoIGEgY29tcGxldGUgc3luY3BhY2tDb25maWcgaXMgcmVxdWlyZWQgaWYgc3VwcGxpZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IFN5bmNwYWNrQ29uZmlnLkRFRkFVTFRfQ09ORklHXG4gICAqL1xuICByZWFkb25seSBzeW5jcGFja0NvbmZpZz86IFN5bmNwYWNrQ29uZmlnO1xufVxuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIE54TW9ub3JlcG9Qcm9qZWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE54TW9ub3JlcG9Qcm9qZWN0T3B0aW9ucyBleHRlbmRzIFR5cGVTY3JpcHRQcm9qZWN0T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBDb25maWd1cmF0aW9uIGZvciBOWC5cbiAgICovXG4gIHJlYWRvbmx5IG54Q29uZmlnPzogTnguV29ya3NwYWNlQ29uZmlnO1xuXG4gIC8qKlxuICAgKiBDb25maWd1cmF0aW9uIGZvciB3b3Jrc3BhY2UuXG4gICAqL1xuICByZWFkb25seSB3b3Jrc3BhY2VDb25maWc/OiBXb3Jrc3BhY2VDb25maWc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jbHVkZSBhbiB1cGdyYWRlLWRlcHMgdGFzayBhdCB0aGUgcm9vdCBvZiB0aGUgbW9ub3JlcG8gd2hpY2ggd2lsbCB1cGdyYWRlIGFsbCBkZXBlbmRlbmNpZXMuXG4gICAqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHJlYWRvbmx5IG1vbm9yZXBvVXBncmFkZURlcHM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBNb25vcmVwbyBVcGdyYWRlIERlcHMgb3B0aW9ucy5cbiAgICpcbiAgICogVGhpcyBpcyBvbmx5IHVzZWQgaWYgbW9ub3JlcG9VcGdyYWRlRGVwcyBpcyB0cnVlLlxuICAgKlxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHJlYWRvbmx5IG1vbm9yZXBvVXBncmFkZURlcHNPcHRpb25zPzogTW9ub3JlcG9VcGdyYWRlRGVwc09wdGlvbnM7XG59XG5cbi8qKlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvcGFja2FnZXMvbngvZG9jdW1lbnRzL3J1bi1tYW55I29wdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOeFJ1bk1hbnlPcHRpb25zIHtcbiAgLyoqIFRhc2sgdG8gcnVuIGZvciBhZmZlY3RlZCBwcm9qZWN0cyAqL1xuICByZWFkb25seSB0YXJnZXQ6IHN0cmluZztcbiAgLyoqIFRoaXMgaXMgdGhlIGNvbmZpZ3VyYXRpb24gdG8gdXNlIHdoZW4gcGVyZm9ybWluZyB0YXNrcyBvbiBwcm9qZWN0cyAqL1xuICByZWFkb25seSBjb25maWd1cmF0aW9uPzogc3RyaW5nO1xuICAvKiogRXhjbHVkZSBjZXJ0YWluIHByb2plY3RzIGZyb20gYmVpbmcgcHJvY2Vzc2VkICovXG4gIHJlYWRvbmx5IGV4Y2x1ZGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEbyBub3Qgc3RvcCBjb21tYW5kIGV4ZWN1dGlvbiBhZnRlciB0aGUgZmlyc3QgZmFpbGVkIHRhc2suXG4gICAqL1xuICByZWFkb25seSBub0JhaWw/OiBib29sZWFuO1xuICAvKipcbiAgICogRGVmaW5lcyBob3cgTnggZW1pdHMgb3V0cHV0cyB0YXNrcyBsb2dzXG4gICAqIEBkZWZhdWx0IFwic3RyZWFtXCJcbiAgICovXG4gIHJlYWRvbmx5IG91dHB1dFN0eWxlPzpcbiAgICB8IFwiZHluYW1pY1wiXG4gICAgfCBcInN0YXRpY1wiXG4gICAgfCBcInN0cmVhbVwiXG4gICAgfCBcInN0cmVhbS13aXRob3V0LXByZWZpeGVzXCI7XG4gIC8qKlxuICAgKiBNYXggbnVtYmVyIG9mIHBhcmFsbGVsIHByb2Nlc3Nlc1xuICAgKiBAZGVmYXVsdCAzXG4gICAqL1xuICByZWFkb25seSBwYXJhbGxlbD86IG51bWJlcjtcbiAgLyoqIFByb2plY3QgdG8gcnVuIGFzIGxpc3QgcHJvamVjdCBuYW1lcyBhbmQvb3IgcGF0dGVybnMuICovXG4gIHJlYWRvbmx5IHByb2plY3RzPzogc3RyaW5nW107XG4gIC8qKiBUaGlzIGlzIHRoZSBuYW1lIG9mIHRoZSB0YXNrcyBydW5uZXIgY29uZmlndXJhdGlvbiBpbiBueC5qc29uICovXG4gIHJlYWRvbmx5IHJ1bm5lcj86IHN0cmluZztcbiAgLyoqIFJlcnVuIHRoZSB0YXNrcyBldmVuIHdoZW4gdGhlIHJlc3VsdHMgYXJlIGF2YWlsYWJsZSBpbiB0aGUgY2FjaGUuICovXG4gIHJlYWRvbmx5IHNraXBDYWNoZT86IGJvb2xlYW47XG4gIC8qKiBJZ25vcmUgY3ljbGVzIGluIHRoZSB0YXNrIGdyYXBoICovXG4gIHJlYWRvbmx5IGlnbm9yZUN5Y2xlcz86IGJvb2xlYW47XG4gIC8qKiBQcmludHMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY29tbWFuZHMgKGUuZy4gc3RhY2sgdHJhY2VzKS4gKi9cbiAgcmVhZG9ubHkgdmVyYm9zZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhpcyBwcm9qZWN0IHR5cGUgd2lsbCBib290c3RyYXAgYSBOWCBiYXNlZCBtb25vcmVwbyB3aXRoIHN1cHBvcnQgZm9yIHBvbHlnb3RcbiAqIGJ1aWxkcywgYnVpbGQgY2FjaGluZywgZGVwZW5kZW5jeSBncmFwaCB2aXN1YWxpemF0aW9uIGFuZCBtdWNoIG1vcmUuXG4gKlxuICogQHBqaWQgbngtbW9ub3JlcG9cbiAqL1xuZXhwb3J0IGNsYXNzIE54TW9ub3JlcG9Qcm9qZWN0IGV4dGVuZHMgVHlwZVNjcmlwdFByb2plY3Qge1xuICAvLyBtdXRhYmxlIGRhdGEgc3RydWN0dXJlc1xuICBwcml2YXRlIHJlYWRvbmx5IGltcGxpY2l0RGVwZW5kZW5jaWVzOiBOeC5JbXBsaWNpdERlcGVuZGVuY2llcztcblxuICAvLyBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmVzXG4gIHByaXZhdGUgcmVhZG9ubHkgbnhDb25maWc/OiBOeC5Xb3Jrc3BhY2VDb25maWc7XG4gIHByaXZhdGUgcmVhZG9ubHkgd29ya3NwYWNlQ29uZmlnPzogV29ya3NwYWNlQ29uZmlnO1xuICBwcml2YXRlIHJlYWRvbmx5IHdvcmtzcGFjZVBhY2thZ2VzOiBzdHJpbmdbXTtcblxuICBwcml2YXRlIHJlYWRvbmx5IG54SnNvbjogSnNvbkZpbGU7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogTnhNb25vcmVwb1Byb2plY3RPcHRpb25zKSB7XG4gICAgc3VwZXIoe1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGdpdGh1Yjogb3B0aW9ucy5naXRodWIgPz8gZmFsc2UsXG4gICAgICBwYWNrYWdlOiBvcHRpb25zLnBhY2thZ2UgPz8gZmFsc2UsXG4gICAgICBwcmV0dGllcjogb3B0aW9ucy5wcmV0dGllciA/PyB0cnVlLFxuICAgICAgcHJvamVucmNUczogdHJ1ZSxcbiAgICAgIHJlbGVhc2U6IG9wdGlvbnMucmVsZWFzZSA/PyBmYWxzZSxcbiAgICAgIGplc3Q6IG9wdGlvbnMuamVzdCA/PyBmYWxzZSxcbiAgICAgIGRlZmF1bHRSZWxlYXNlQnJhbmNoOiBvcHRpb25zLmRlZmF1bHRSZWxlYXNlQnJhbmNoID8/IFwibWFpbmxpbmVcIixcbiAgICAgIHNhbXBsZUNvZGU6IGZhbHNlLCAvLyByb290IHNob3VsZCBuZXZlciBoYXZlIHNhbXBsZSBjb2RlLFxuICAgICAgZ2l0aWdub3JlOiBbXCIubngvY2FjaGVcIl0sXG4gICAgICBlc2xpbnRPcHRpb25zOiBvcHRpb25zLmVzbGludE9wdGlvbnMgPz8ge1xuICAgICAgICBkaXJzOiBbXCIuXCJdLFxuICAgICAgICBpZ25vcmVQYXR0ZXJuczogW1wicGFja2FnZXMvKiovKi4qXCJdLFxuICAgICAgfSxcbiAgICAgIHRzY29uZmlnOiBvcHRpb25zLnRzY29uZmlnID8/IHtcbiAgICAgICAgY29tcGlsZXJPcHRpb25zOiB7XG4gICAgICAgICAgcm9vdERpcjogXCIuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IFtcIioqLyoudHNcIl0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5ueENvbmZpZyA9IG9wdGlvbnMubnhDb25maWc7XG4gICAgdGhpcy53b3Jrc3BhY2VDb25maWcgPSBvcHRpb25zLndvcmtzcGFjZUNvbmZpZztcbiAgICB0aGlzLndvcmtzcGFjZVBhY2thZ2VzID0gb3B0aW9ucy53b3Jrc3BhY2VDb25maWc/LmFkZGl0aW9uYWxQYWNrYWdlcyA/PyBbXTtcbiAgICB0aGlzLmltcGxpY2l0RGVwZW5kZW5jaWVzID0gdGhpcy5ueENvbmZpZz8uaW1wbGljaXREZXBlbmRlbmNpZXMgfHwge307XG5cbiAgICAvLyBOZXZlciBwdWJsaXNoIGEgbW9ub3JlcG8gcm9vdCBwYWNrYWdlLlxuICAgIHRoaXMucGFja2FnZS5hZGRGaWVsZChcInByaXZhdGVcIiwgdHJ1ZSk7XG5cbiAgICAvLyBBZGQgYWxpYXMgdGFzayBmb3IgXCJwcm9qZW5cIiB0byBzeW50aGVzaXplIHdvcmtzcGFjZVxuICAgIHRoaXMuYWRkVGFzayhcInN5bnRoLXdvcmtzcGFjZVwiLCB7XG4gICAgICBleGVjOiBidWlsZEV4ZWN1dGFibGVDb21tYW5kKHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlciwgXCJwcm9qZW5cIiksXG4gICAgICBkZXNjcmlwdGlvbjogXCJTeW50aGVzaXplIHdvcmtzcGFjZVwiLFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRUYXNrKFwicnVuLW1hbnlcIiwge1xuICAgICAgcmVjZWl2ZUFyZ3M6IHRydWUsXG4gICAgICBleGVjOiBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICB0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXIsXG4gICAgICAgIFwibnhcIixcbiAgICAgICAgXCJydW4tbWFueVwiXG4gICAgICApLFxuICAgICAgZGVzY3JpcHRpb246IFwiUnVuIHRhc2sgYWdhaW5zdCBtdWx0aXBsZSB3b3Jrc3BhY2UgcHJvamVjdHNcIixcbiAgICB9KTtcblxuICAgIC8vIE1hcCB0YXNrcyB0byBueCBydW4tbWFueVxuICAgIGlmIChvcHRpb25zLnNjcmlwdHMgPT0gbnVsbCB8fCBvcHRpb25zLnNjcmlwdHMuYnVpbGQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5fb3ZlcnJpZGVOeEJ1aWxkVGFzayh0aGlzLmJ1aWxkVGFzaywgeyB0YXJnZXQ6IFwiYnVpbGRcIiB9LCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0c1tcInByZS1jb21waWxlXCJdID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2sodGhpcy5wcmVDb21waWxlVGFzaywgeyB0YXJnZXQ6IFwicHJlLWNvbXBpbGVcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy5jb21waWxlID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2sodGhpcy5jb21waWxlVGFzaywgeyB0YXJnZXQ6IFwiY29tcGlsZVwiIH0pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zY3JpcHRzID09IG51bGwgfHwgb3B0aW9ucy5zY3JpcHRzW1wicG9zdC1jb21waWxlXCJdID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2sodGhpcy5wb3N0Q29tcGlsZVRhc2ssIHtcbiAgICAgICAgdGFyZ2V0OiBcInBvc3QtY29tcGlsZVwiLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNjcmlwdHMgPT0gbnVsbCB8fCBvcHRpb25zLnNjcmlwdHMudGVzdCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9vdmVycmlkZU54QnVpbGRUYXNrKHRoaXMudGVzdFRhc2ssIHsgdGFyZ2V0OiBcInRlc3RcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy5lc2xpbnQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5fb3ZlcnJpZGVOeEJ1aWxkVGFzayh0aGlzLmVzbGludD8uZXNsaW50VGFzaywgeyB0YXJnZXQ6IFwiZXNsaW50XCIgfSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNjcmlwdHMgPT0gbnVsbCB8fCBvcHRpb25zLnNjcmlwdHMucGFja2FnZSA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9vdmVycmlkZU54QnVpbGRUYXNrKHRoaXMucGFja2FnZVRhc2ssIHsgdGFyZ2V0OiBcInBhY2thZ2VcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy5wcmVwYXJlID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2soXCJwcmVwYXJlXCIsIHsgdGFyZ2V0OiBcInByZXBhcmVcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy53YXRjaCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9vdmVycmlkZU54QnVpbGRUYXNrKHRoaXMud2F0Y2hUYXNrLCB7XG4gICAgICAgIHRhcmdldDogXCJ3YXRjaFwiLFxuICAgICAgICBub0JhaWw6IGZhbHNlLFxuICAgICAgICBpZ25vcmVDeWNsZXM6IHRydWUsXG4gICAgICAgIHNraXBDYWNoZTogdHJ1ZSxcbiAgICAgICAgb3V0cHV0U3R5bGU6IFwic3RyZWFtXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZERldkRlcHMoXCJueFwiLCBcIkBucndsL2NsaVwiLCBcIkBucndsL3dvcmtzcGFjZVwiKTtcbiAgICB0aGlzLmFkZERlcHMoXCJhd3MtY2RrLWxpYlwiLCBcImNvbnN0cnVjdHNcIiwgXCJjZGstbmFnXCIpOyAvLyBOZWVkZWQgYXMgdGhpcyBjYW4gYmUgYnVuZGxlZCBpbiBhd3MtcHJvdG90eXBpbmctc2RrXG4gICAgdGhpcy5wYWNrYWdlLmFkZFBhY2thZ2VSZXNvbHV0aW9ucyhcIkB0eXBlcy9iYWJlbF9fdHJhdmVyc2VANy4xOC4yXCIpO1xuXG4gICAgaWYgKG9wdGlvbnMubW9ub3JlcG9VcGdyYWRlRGVwcyAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuYWRkRGV2RGVwcyhcIm5wbS1jaGVjay11cGRhdGVzXCIsIFwic3luY3BhY2tcIik7XG5cbiAgICAgIGNvbnN0IHVwZ3JhZGVEZXBzVGFzayA9IHRoaXMuYWRkVGFzayhcbiAgICAgICAgb3B0aW9ucy5tb25vcmVwb1VwZ3JhZGVEZXBzT3B0aW9ucz8udGFza05hbWUgfHwgXCJ1cGdyYWRlLWRlcHNcIlxuICAgICAgKTtcbiAgICAgIHVwZ3JhZGVEZXBzVGFzay5leGVjKFxuICAgICAgICBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICAgIHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlcixcbiAgICAgICAgICBcIm5wbS1jaGVjay11cGRhdGVzXCIsXG4gICAgICAgICAgXCItLWRlZXBcIixcbiAgICAgICAgICBcIi0tcmVqZWN0VmVyc2lvblwiLFxuICAgICAgICAgIFwiMC4wLjBcIixcbiAgICAgICAgICBcIi11XCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHVwZ3JhZGVEZXBzVGFzay5leGVjKFxuICAgICAgICBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICAgIHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlcixcbiAgICAgICAgICBcInN5bmNwYWNrXCIsXG4gICAgICAgICAgXCJmaXgtbWlzbWF0Y2hlc1wiXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICB1cGdyYWRlRGVwc1Rhc2suZXhlYyhgJHt0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXJ9IGluc3RhbGxgKTtcbiAgICAgIHVwZ3JhZGVEZXBzVGFzay5leGVjKFxuICAgICAgICBidWlsZEV4ZWN1dGFibGVDb21tYW5kKHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlciwgXCJwcm9qZW5cIilcbiAgICAgICk7XG5cbiAgICAgIG5ldyBKc29uRmlsZSh0aGlzLCBcIi5zeW5jcGFja3JjLmpzb25cIiwge1xuICAgICAgICBvYmo6XG4gICAgICAgICAgb3B0aW9ucy5tb25vcmVwb1VwZ3JhZGVEZXBzT3B0aW9ucz8uc3luY3BhY2tDb25maWcgfHwgREVGQVVMVF9DT05GSUcsXG4gICAgICAgIHJlYWRvbmx5OiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3B0aW9ucy5ueENvbmZpZz8ubnhDbG91ZFJlYWRPbmx5QWNjZXNzVG9rZW4gJiZcbiAgICAgIHRoaXMuYWRkRGV2RGVwcyhcIkBucndsL254LWNsb3VkXCIpO1xuXG4gICAgbmV3IElnbm9yZUZpbGUodGhpcywgXCIubnhpZ25vcmVcIikuZXhjbHVkZShcbiAgICAgIFwidGVzdC1yZXBvcnRzXCIsXG4gICAgICBcInRhcmdldFwiLFxuICAgICAgXCIuZW52XCIsXG4gICAgICBcIi5weXRlc3RfY2FjaGVcIixcbiAgICAgIC4uLih0aGlzLm54Q29uZmlnPy5ueElnbm9yZSB8fCBbXSlcbiAgICApO1xuXG4gICAgbmV3IFRleHRGaWxlKHRoaXMsIE5YX01PTk9SRVBPX1BMVUdJTl9QQVRILCB7XG4gICAgICByZWFkb25seTogdHJ1ZSxcbiAgICAgIGxpbmVzOiBmcy5yZWFkRmlsZVN5bmMoZ2V0UGx1Z2luUGF0aCgpKS50b1N0cmluZyhcInV0Zi04XCIpLnNwbGl0KFwiXFxuXCIpLFxuICAgIH0pO1xuXG4gICAgdGhpcy5ueEpzb24gPSBuZXcgSnNvbkZpbGUodGhpcywgXCJueC5qc29uXCIsIHtcbiAgICAgIG9iajoge1xuICAgICAgICBleHRlbmRzOiBcIkBucndsL3dvcmtzcGFjZS9wcmVzZXRzL25wbS5qc29uXCIsXG4gICAgICAgIHBsdWdpbnM6IFtgLi8ke05YX01PTk9SRVBPX1BMVUdJTl9QQVRIfWBdLFxuICAgICAgICBucG1TY29wZTogXCJtb25vcmVwb1wiLFxuICAgICAgICB0YXNrc1J1bm5lck9wdGlvbnM6IHtcbiAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBydW5uZXI6IG9wdGlvbnMubnhDb25maWc/Lm54Q2xvdWRSZWFkT25seUFjY2Vzc1Rva2VuXG4gICAgICAgICAgICAgID8gXCJAbnJ3bC9ueC1jbG91ZFwiXG4gICAgICAgICAgICAgIDogXCJAbnJ3bC93b3Jrc3BhY2UvdGFza3MtcnVubmVycy9kZWZhdWx0XCIsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgIHVzZURhZW1vblByb2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICBjYWNoZWFibGVPcGVyYXRpb25zOiBvcHRpb25zLm54Q29uZmlnPy5jYWNoZWFibGVPcGVyYXRpb25zIHx8IFtcbiAgICAgICAgICAgICAgICBcImJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvcHRpb25zLm54Q29uZmlnPy5ueENsb3VkUmVhZE9ubHlBY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZWRJbnB1dHM6IHtcbiAgICAgICAgICAvLyBodHRwczovL254LmRldi9tb3JlLWNvbmNlcHRzL2N1c3RvbWl6aW5nLWlucHV0cyNkZWZhdWx0c1xuICAgICAgICAgIGRlZmF1bHQ6IFtcIntwcm9qZWN0Um9vdH0vKiovKlwiXSxcbiAgICAgICAgICAuLi5vcHRpb25zLm54Q29uZmlnPy5uYW1lZElucHV0cyxcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0RGVmYXVsdHM6IG9wdGlvbnMubnhDb25maWc/LnRhcmdldERlZmF1bHRzLFxuICAgICAgICBpbXBsaWNpdERlcGVuZGVuY2llczogdGhpcy5pbXBsaWNpdERlcGVuZGVuY2llcyxcbiAgICAgICAgdGFyZ2V0RGVwZW5kZW5jaWVzOiB7XG4gICAgICAgICAgYnVpbGQ6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcImJ1aWxkXCIsXG4gICAgICAgICAgICAgIHByb2plY3RzOiBcImRlcGVuZGVuY2llc1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIC4uLih0aGlzLm54Q29uZmlnPy50YXJnZXREZXBlbmRlbmNpZXMgfHwge30pLFxuICAgICAgICB9LFxuICAgICAgICBhZmZlY3RlZDoge1xuICAgICAgICAgIGRlZmF1bHRCYXNlOiB0aGlzLm54Q29uZmlnPy5hZmZlY3RlZEJyYW5jaCB8fCBcIm1haW5saW5lXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBmb3JtYXQgYG5weCBueCBydW4tbWFueSAuLi5gIHN0eWxlIGNvbW1hbmQuXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqL1xuICBwdWJsaWMgZm9ybWF0TnhSdW5NYW55Q29tbWFuZChvcHRpb25zOiBOeFJ1bk1hbnlPcHRpb25zKTogc3RyaW5nIHtcbiAgICBjb25zdCBhcmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChvcHRpb25zLmNvbmZpZ3VyYXRpb24pIHtcbiAgICAgIGFyZ3MucHVzaChgLS1jb25maWd1cmF0aW9uPSR7b3B0aW9ucy5jb25maWd1cmF0aW9ufWApO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5ydW5uZXIpIHtcbiAgICAgIGFyZ3MucHVzaChgLS1ydW5uZXI9JHtvcHRpb25zLnJ1bm5lcn1gKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucGFyYWxsZWwpIHtcbiAgICAgIGFyZ3MucHVzaChgLS1wYXJhbGxlbD0ke29wdGlvbnMucGFyYWxsZWx9YCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNraXBDYWNoZSkge1xuICAgICAgYXJncy5wdXNoKFwiLS1za2lwLW54LWNhY2hlXCIpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5pZ25vcmVDeWNsZXMpIHtcbiAgICAgIGFyZ3MucHVzaChcIi0tbngtaWdub3JlLWN5Y2xlc1wiKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubm9CYWlsICE9PSB0cnVlKSB7XG4gICAgICBhcmdzLnB1c2goXCItLW54LWJhaWxcIik7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnByb2plY3RzICYmIG9wdGlvbnMucHJvamVjdHMubGVuZ3RoKSB7XG4gICAgICBhcmdzLnB1c2goYC0tcHJvamVjdHM9JHtvcHRpb25zLnByb2plY3RzLmpvaW4oXCIsXCIpfWApO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5leGNsdWRlKSB7XG4gICAgICBhcmdzLnB1c2goYC0tZXhjbHVkZT0ke29wdGlvbnMuZXhjbHVkZX1gKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudmVyYm9zZSkge1xuICAgICAgYXJncy5wdXNoKFwiLS12ZXJib3NlXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgdGhpcy5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyLFxuICAgICAgXCJueFwiLFxuICAgICAgXCJydW4tbWFueVwiLFxuICAgICAgYC0tdGFyZ2V0PSR7b3B0aW9ucy50YXJnZXR9YCxcbiAgICAgIGAtLW91dHB1dC1zdHlsZT0ke29wdGlvbnMub3V0cHV0U3R5bGUgfHwgXCJzdHJlYW1cIn1gLFxuICAgICAgLi4uYXJnc1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGVzIFwiYnVpbGRcIiByZWxhdGVkIHByb2plY3QgdGFza3MgKGJ1aWxkLCBjb21waWxlLCB0ZXN0LCBldGMuKSB3aXRoIGBucHggbnggcnVuLW1hbnlgIGZvcm1hdC5cbiAgICogQHBhcmFtIHRhc2sgLSBUaGUgdGFzayBvciB0YXNrIG5hbWUgdG8gb3ZlcnJpZGVcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBOeCBydW4tbWFueSBvcHRpb25zXG4gICAqIEBwYXJhbSBmb3JjZSAtIEZvcmNlIHVubG9ja2luZyB0YXNrIChlZzogYnVpbGQgdGFzayBpcyBsb2NrZWQpXG4gICAqIEByZXR1cm5zIC0gVGhlIHRhc2sgdGhhdCB3YXMgb3ZlcnJpZGRlblxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByb3RlY3RlZCBfb3ZlcnJpZGVOeEJ1aWxkVGFzayhcbiAgICB0YXNrOiBUYXNrIHwgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIG9wdGlvbnM6IE54UnVuTWFueU9wdGlvbnMsXG4gICAgZm9yY2U/OiBib29sZWFuXG4gICk6IFRhc2sgfCB1bmRlZmluZWQge1xuICAgIGlmICh0eXBlb2YgdGFzayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdGFzayA9IHRoaXMudGFza3MudHJ5RmluZCh0YXNrKTtcbiAgICB9XG5cbiAgICBpZiAodGFzayA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGZvcmNlKSB7XG4gICAgICAvLyBAdHMtaWdub3JlIC0gcHJpdmF0ZSBwcm9wZXJ0eVxuICAgICAgdGFzay5fbG9ja2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdGFzay5yZXNldCh0aGlzLmZvcm1hdE54UnVuTWFueUNvbW1hbmQob3B0aW9ucyksIHtcbiAgICAgIHJlY2VpdmVBcmdzOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgdGFzay5kZXNjcmlwdGlvbiArPSBcIiBmb3IgYWxsIGFmZmVjdGVkIHByb2plY3RzXCI7XG5cbiAgICByZXR1cm4gdGFzaztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgcHJvamVjdCB0YXNrIHRoYXQgZXhlY3V0ZXMgYG5weCBueCBydW4tbWFueSAuLi5gIHN0eWxlIGNvbW1hbmQuXG4gICAqL1xuICBwdWJsaWMgYWRkTnhSdW5NYW55VGFzayhuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IE54UnVuTWFueU9wdGlvbnMpOiBUYXNrIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKG5hbWUsIHtcbiAgICAgIHJlY2VpdmVBcmdzOiB0cnVlLFxuICAgICAgZXhlYzogdGhpcy5mb3JtYXROeFJ1bk1hbnlDb21tYW5kKG9wdGlvbnMpLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbXBsaWNpdCBkZXBlbmRlbmN5IGJldHdlZW4gdHdvIFByb2plY3Qncy4gVGhpcyBpcyB0eXBpY2FsbHlcbiAgICogdXNlZCBpbiBwb2x5Z290IHJlcG9zIHdoZXJlIGEgVHlwZXNjcmlwdCBwcm9qZWN0IHdhbnRzIGEgYnVpbGQgZGVwZW5kZW5jeVxuICAgKiBvbiBhIFB5dGhvbiBwcm9qZWN0IGFzIGFuIGV4YW1wbGUuXG4gICAqXG4gICAqIEBwYXJhbSBkZXBlbmRlbnQgcHJvamVjdCB5b3Ugd2FudCB0byBoYXZlIHRoZSBkZXBlbmRlbmN5LlxuICAgKiBAcGFyYW0gZGVwZW5kZWUgcHJvamVjdCB5b3Ugd2lzaCB0byBkZXBlbmQgb24uXG4gICAqL1xuICBwdWJsaWMgYWRkSW1wbGljaXREZXBlbmRlbmN5KGRlcGVuZGVudDogUHJvamVjdCwgZGVwZW5kZWU6IFByb2plY3QpIHtcbiAgICBpZiAodGhpcy5pbXBsaWNpdERlcGVuZGVuY2llc1tkZXBlbmRlbnQubmFtZV0pIHtcbiAgICAgIHRoaXMuaW1wbGljaXREZXBlbmRlbmNpZXNbZGVwZW5kZW50Lm5hbWVdLnB1c2goZGVwZW5kZWUubmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW1wbGljaXREZXBlbmRlbmNpZXNbZGVwZW5kZW50Lm5hbWVdID0gW2RlcGVuZGVlLm5hbWVdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgb25lIG9yIG1vcmUgYWRkaXRpb25hbCBwYWNrYWdlIGdsb2JzIHRvIHRoZSB3b3Jrc3BhY2UuXG4gICAqIEBwYXJhbSBwYWNrYWdlR2xvYnMgcGF0aHMgdG8gdGhlIHBhY2thZ2UgdG8gaW5jbHVkZSBpbiB0aGUgd29ya3NwYWNlIChmb3IgZXhhbXBsZSBwYWNrYWdlcy9teS1wYWNrYWdlKVxuICAgKi9cbiAgcHVibGljIGFkZFdvcmtzcGFjZVBhY2thZ2VzKC4uLnBhY2thZ2VHbG9iczogc3RyaW5nW10pIHtcbiAgICAvLyBBbnkgc3VicHJvamVjdHMgdGhhdCB3ZXJlIGFkZGVkIHNpbmNlIHRoZSBsYXN0IGNhbGwgdG8gdGhpcyBtZXRob2QgbmVlZCB0byBiZSBhZGRlZCBmaXJzdCwgaW4gb3JkZXIgdG8gZW5zdXJlXG4gICAgLy8gd2UgYWRkIHRoZSB3b3Jrc3BhY2UgcGFja2FnZXMgaW4gYSBzYW5lIG9yZGVyLlxuICAgIGNvbnN0IHJlbGF0aXZlU3ViUHJvamVjdFdvcmtzcGFjZVBhY2thZ2VzID1cbiAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk9yZGVyU3ViUHJvamVjdHMubWFwKChwcm9qZWN0KSA9PlxuICAgICAgICBwYXRoLnJlbGF0aXZlKHRoaXMub3V0ZGlyLCBwcm9qZWN0Lm91dGRpcilcbiAgICAgICk7XG4gICAgY29uc3QgZXhpc3RpbmdXb3Jrc3BhY2VQYWNrYWdlcyA9IG5ldyBTZXQodGhpcy53b3Jrc3BhY2VQYWNrYWdlcyk7XG4gICAgdGhpcy53b3Jrc3BhY2VQYWNrYWdlcy5wdXNoKFxuICAgICAgLi4ucmVsYXRpdmVTdWJQcm9qZWN0V29ya3NwYWNlUGFja2FnZXMuZmlsdGVyKFxuICAgICAgICAocGtnKSA9PiAhZXhpc3RpbmdXb3Jrc3BhY2VQYWNrYWdlcy5oYXMocGtnKVxuICAgICAgKVxuICAgICk7XG5cbiAgICAvLyBBZGQgdGhlIGFkZGl0aW9uYWwgcGFja2FnZXMgbmV4dFxuICAgIHRoaXMud29ya3NwYWNlUGFja2FnZXMucHVzaCguLi5wYWNrYWdlR2xvYnMpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHRoaXMgaGFjayBvbmNlIHN1YlByb2plY3RzIGlzIG1hZGUgcHVibGljIGluIFByb2plblxuICBwcml2YXRlIGdldCBpbnN0YW50aWF0aW9uT3JkZXJTdWJQcm9qZWN0cygpOiBQcm9qZWN0W10ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBzdWJQcm9qZWN0czogUHJvamVjdFtdID0gdGhpcy5zdWJwcm9qZWN0cyB8fCBbXTtcbiAgICByZXR1cm4gc3ViUHJvamVjdHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHN1YlByb2plY3RzKCk6IFByb2plY3RbXSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFudGlhdGlvbk9yZGVyU3ViUHJvamVjdHMuc29ydCgoYSwgYikgPT5cbiAgICAgIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBzeW50aCgpIHtcbiAgICB0aGlzLnZhbGlkYXRlU3ViUHJvamVjdHMoKTtcbiAgICB0aGlzLnVwZGF0ZVdvcmtzcGFjZSgpO1xuICAgIHRoaXMud2lyZVB5dGhvbkRlcGVuZGVuY2llcygpO1xuICAgIHRoaXMuc3ludGhlc2l6ZU5vbk5vZGVQYWNrYWdlSnNvbigpO1xuXG4gICAgLy8gUHJldmVudCBzdWIgTm9kZVByb2plY3QgcGFja2FnZXMgZnJvbSBgcG9zdFN5bnRoZXNpc2Agd2hpY2ggd2lsbCBjYXVzZSBpbmRpdmlkdWFsL2V4dHJhbmVvdXMgaW5zdGFsbHMuXG4gICAgLy8gVGhlIHdvcmtzcGFjZSBwYWNrYWdlIGluc3RhbGwgd2lsbCBoYW5kbGUgYWxsIHRoZSBzdWIgTm9kZVByb2plY3QgcGFja2FnZXMgYXV0b21hdGljYWxseS5cbiAgICBjb25zdCBzdWJQcm9qZWN0UGFja2FnZXM6IE5vZGVQYWNrYWdlW10gPSBbXTtcbiAgICB0aGlzLnN1YlByb2plY3RzLmZvckVhY2goKHN1YlByb2plY3QpID0+IHtcbiAgICAgIGlmIChpc05vZGVQcm9qZWN0KHN1YlByb2plY3QpKSB7XG4gICAgICAgIGNvbnN0IHN1Yk5vZGVQcm9qZWN0OiBOb2RlUHJvamVjdCA9IHN1YlByb2plY3QgYXMgTm9kZVByb2plY3Q7XG4gICAgICAgIHN1YlByb2plY3RQYWNrYWdlcy5wdXNoKHN1Yk5vZGVQcm9qZWN0LnBhY2thZ2UpO1xuICAgICAgICAvLyBAdHMtaWdub3JlIC0gYGluc3RhbGxEZXBlbmRlbmNpZXNgIGlzIHByaXZhdGVcbiAgICAgICAgc3ViTm9kZVByb2plY3QucGFja2FnZS5pbnN0YWxsRGVwZW5kZW5jaWVzID0gKCkgPT4ge307XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdXBlci5zeW50aCgpO1xuXG4gICAgLy8gRm9yY2Ugd29ya3NwYWNlIGluc3RhbGwgZGVwcyBpZiBhbnkgbm9kZSBzdWJwcm9qZWN0IHBhY2thZ2UgaGFzIGNoYW5nZSwgdW5sZXNzIHRoZSB3b3Jrc3BhY2UgY2hhbmdlZFxuICAgIGlmIChcbiAgICAgIC8vIEB0cy1pZ25vcmUgLSBgZmlsZWAgaXMgcHJpdmF0ZVxuICAgICAgKHRoaXMucGFja2FnZS5maWxlIGFzIEpzb25GaWxlKS5jaGFuZ2VkICE9PSB0cnVlICYmXG4gICAgICAvLyBAdHMtaWdub3JlIC0gYGZpbGVgIGlzIHByaXZhdGVcbiAgICAgIHN1YlByb2plY3RQYWNrYWdlcy5maW5kKChwa2cpID0+IChwa2cuZmlsZSBhcyBKc29uRmlsZSkuY2hhbmdlZCA9PT0gdHJ1ZSlcbiAgICApIHtcbiAgICAgIC8vIEB0cy1pZ25vcmUgLSBgaW5zdGFsbERlcGVuZGVuY2llc2AgaXMgcHJpdmF0ZVxuICAgICAgdGhpcy5wYWNrYWdlLmluc3RhbGxEZXBlbmRlbmNpZXMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlcyBzdWJwcm9qZWN0cyBkb24ndCBoYXZlIGEgZGVmYXVsdCB0YXNrIGFuZCB0aGF0IGFsbCBwYWNrYWdlcyB1c2UgdGhlIHNhbWUgcGFja2FnZSBtYW5hZ2VyLlxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZVN1YlByb2plY3RzKCkge1xuICAgIHRoaXMuc3ViUHJvamVjdHMuZm9yRWFjaCgoc3ViUHJvamVjdDogYW55KSA9PiB7XG4gICAgICAvLyBEaXNhYmxlIGRlZmF1bHQgdGFzayBvbiBzdWJwcm9qZWN0cyBhcyB0aGlzIGlzbid0IHN1cHBvcnRlZCBpbiBhIG1vbm9yZXBvXG4gICAgICBzdWJQcm9qZWN0LmRlZmF1bHRUYXNrPy5yZXNldCgpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGlzTm9kZVByb2plY3Qoc3ViUHJvamVjdCkgJiZcbiAgICAgICAgc3ViUHJvamVjdC5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyICE9PSB0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXJcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYCR7c3ViUHJvamVjdC5uYW1lfSBwYWNrYWdlTWFuYWdlciBkb2VzIG5vdCBtYXRjaCB0aGUgbW9ub3JlcG8gcGFja2FnZU1hbmFnZXI6ICR7dGhpcy5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyfS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRm9yIG5vbi1ub2RlIHByb2plY3RzLCBhIHBhY2thZ2UuanNvbiBpcyByZXF1aXJlZCBpbiBvcmRlciB0byBiZSBkaXNjb3ZlcmVkIGJ5IE5YLlxuICAgKi9cbiAgcHJpdmF0ZSBzeW50aGVzaXplTm9uTm9kZVBhY2thZ2VKc29uKCkge1xuICAgIHRoaXMuc3ViUHJvamVjdHNcbiAgICAgIC5maWx0ZXIoKHN1YlByb2plY3Q6IGFueSkgPT4gIWlzTm9kZVByb2plY3Qoc3ViUHJvamVjdCkpXG4gICAgICAuZmlsdGVyKChzdWJQcm9qZWN0OiBQcm9qZWN0KSA9PiAhc3ViUHJvamVjdC50cnlGaW5kRmlsZShcInBhY2thZ2UuanNvblwiKSlcbiAgICAgIC5mb3JFYWNoKChzdWJQcm9qZWN0OiBQcm9qZWN0KSA9PiB7XG4gICAgICAgIC8vIGdlbmVyYXRlIGEgcGFja2FnZS5qc29uIGlmIG5vdCBmb3VuZFxuICAgICAgICBjb25zdCBtYW5pZmVzdDogYW55ID0ge1xuICAgICAgICAgIG5hbWU6IHN1YlByb2plY3QubmFtZSxcbiAgICAgICAgICBwcml2YXRlOiB0cnVlLFxuICAgICAgICAgIF9fcGRrX186IHRydWUsXG4gICAgICAgICAgZGV2RGVwZW5kZW5jaWVzOiB7IHByb2plbjogXCIqXCIgfSxcbiAgICAgICAgICBzY3JpcHRzOiBzdWJQcm9qZWN0LnRhc2tzLmFsbC5yZWR1Y2UoXG4gICAgICAgICAgICAocCwgYykgPT4gKHtcbiAgICAgICAgICAgICAgW2MubmFtZV06IGAke2J1aWxkRXhlY3V0YWJsZUNvbW1hbmQoXG4gICAgICAgICAgICAgICAgdGhpcy5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyXG4gICAgICAgICAgICAgICl9IHByb2plbiAke2MubmFtZX1gLFxuICAgICAgICAgICAgICAuLi5wLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB7fVxuICAgICAgICAgICksXG4gICAgICAgICAgdmVyc2lvbjogXCIwLjAuMFwiLFxuICAgICAgICB9O1xuXG4gICAgICAgIG5ldyBKc29uRmlsZShzdWJQcm9qZWN0LCBcInBhY2thZ2UuanNvblwiLCB7XG4gICAgICAgICAgb2JqOiBtYW5pZmVzdCxcbiAgICAgICAgICByZWFkb25seTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBzdWJtb2R1bGUgZW50cnkgdG8gdGhlIGFwcHJvcHJpYXRlIHdvcmtzcGFjZSBmaWxlLlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVXb3Jrc3BhY2UoKSB7XG4gICAgLy8gQSBmaW5hbCBjYWxsIHRvIGFkZFdvcmtzcGFjZVBhY2thZ2VzIHdpbGwgdXBkYXRlIHRoZSBsaXN0IG9mIHdvcmtzcGFjZSBwYWNrYWdlcyB3aXRoIGFueSBzdWJwcm9qZWN0cyB0aGF0IGhhdmVcbiAgICAvLyBub3QgeWV0IGJlZW4gYWRkZWQsIGluIHRoZSBjb3JyZWN0IG9yZGVyXG4gICAgdGhpcy5hZGRXb3Jrc3BhY2VQYWNrYWdlcygpO1xuXG4gICAgbGV0IG5vSG9pc3QgPSB0aGlzLndvcmtzcGFjZUNvbmZpZz8ubm9Ib2lzdDtcbiAgICAvLyBBdXRvbWF0aWNhbGx5IGFkZCBhbGwgc3ViLXByb2plY3QgXCJidW5kbGVkRGVwZW5kZW5jaWVzXCIgdG8gd29ya3NwYWNlIFwiaG9ob2lzdFwiLCBvdGhlcndpc2UgdGhleSBhcmUgbm90IGJ1bmRsZWQgaW4gbnBtIHBhY2thZ2VcbiAgICBpZiAodGhpcy53b3Jrc3BhY2VDb25maWc/LmRpc2FibGVOb0hvaXN0QnVuZGxlZCAhPT0gdHJ1ZSkge1xuICAgICAgY29uc3Qgbm9Ib2lzdEJ1bmRsZWQgPSB0aGlzLnN1YlByb2plY3RzLmZsYXRNYXAoKHN1YikgPT4ge1xuICAgICAgICBpZiAoc3ViIGluc3RhbmNlb2YgTm9kZVByb2plY3QpIHtcbiAgICAgICAgICByZXR1cm4gc3ViLmRlcHMuYWxsXG4gICAgICAgICAgICAuZmlsdGVyKChkZXApID0+IGRlcC50eXBlID09PSBEZXBlbmRlbmN5VHlwZS5CVU5ETEVEKVxuICAgICAgICAgICAgLmZsYXRNYXAoKGRlcCkgPT4gW1xuICAgICAgICAgICAgICBgJHtzdWIubmFtZX0vJHtkZXAubmFtZX1gLFxuICAgICAgICAgICAgICBgJHtzdWIubmFtZX0vJHtkZXAubmFtZX0vKmAsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9KTtcblxuICAgICAgaWYgKG5vSG9pc3RCdW5kbGVkLmxlbmd0aCkge1xuICAgICAgICBub0hvaXN0ID0gWy4uLihub0hvaXN0IHx8IFtdKSwgLi4ubm9Ib2lzdEJ1bmRsZWRdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCB3b3Jrc3BhY2VzIGZvciBlYWNoIHN1YnByb2plY3RcbiAgICBpZiAodGhpcy5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyID09PSBOb2RlUGFja2FnZU1hbmFnZXIuUE5QTSkge1xuICAgICAgbmV3IFlhbWxGaWxlKHRoaXMsIFwicG5wbS13b3Jrc3BhY2UueWFtbFwiLCB7XG4gICAgICAgIHJlYWRvbmx5OiB0cnVlLFxuICAgICAgICBvYmo6IHtcbiAgICAgICAgICBwYWNrYWdlczogdGhpcy53b3Jrc3BhY2VQYWNrYWdlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLnBhY2thZ2UuYWRkRmllbGQoXCJ3b3Jrc3BhY2VzXCIsIHtcbiAgICAgIHBhY2thZ2VzOiB0aGlzLndvcmtzcGFjZVBhY2thZ2VzLFxuICAgICAgbm9ob2lzdDogbm9Ib2lzdCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBpbnN0YWxsIHRhc2sgZm9yIHB5dGhvbiBwcm9qZWN0cyBzbyB0aGF0IHRoZXkgYXJlIHJ1biBzZXJpYWxseSBhbmQgaW4gZGVwZW5kZW5jeSBvcmRlciBzdWNoIHRoYXQgcHl0aG9uXG4gICAqIHByb2plY3RzIHdpdGhpbiB0aGUgbW9ub3JlcG8gY2FuIGRlY2xhcmUgZGVwZW5kZW5jaWVzIG9uIG9uZSBhbm90aGVyLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSB3aXJlUHl0aG9uRGVwZW5kZW5jaWVzKCkge1xuICAgIC8vIEZpbmQgYW55IHB5dGhvbiBwcm9qZWN0c1xuICAgIGNvbnN0IHB5dGhvblByb2plY3RzID0gdGhpcy5zdWJQcm9qZWN0cy5maWx0ZXIoXG4gICAgICAocHJvamVjdCkgPT4gcHJvamVjdCBpbnN0YW5jZW9mIFB5dGhvblByb2plY3RcbiAgICApIGFzIFB5dGhvblByb2plY3RbXTtcblxuICAgIGlmIChweXRob25Qcm9qZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIE5vdGhpbmcgdG8gZG8gZm9yIG5vIHB5dGhvbiBwcm9qZWN0c1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE1vdmUgYWxsIGluc3RhbGwgY29tbWFuZHMgdG8gaW5zdGFsbC1weSBzbyB0aGF0IHRoZXkgYXJlIG5vdCBpbnN0YWxsZWQgaW4gcGFyYWxsZWwgYnkgdGhlIG1vbm9yZXBvIHBhY2thZ2UgbWFuYWdlci5cbiAgICAvLyBlZyB5YXJuIGluc3RhbGwgd2lsbCBydW4gdGhlIGluc3RhbGwgdGFzayBmb3IgYWxsIHBhY2thZ2VzIGluIHBhcmFsbGVsIHdoaWNoIGNhbiBsZWFkIHRvIGNvbmZsaWN0cyBmb3IgcHl0aG9uLlxuICAgIHB5dGhvblByb2plY3RzLmZvckVhY2goKHB5dGhvblByb2plY3QpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbGxQeVRhc2sgPVxuICAgICAgICBweXRob25Qcm9qZWN0LnRhc2tzLnRyeUZpbmQoXCJpbnN0YWxsLXB5XCIpID8/XG4gICAgICAgIHB5dGhvblByb2plY3QuYWRkVGFzayhcImluc3RhbGwtcHlcIik7XG4gICAgICBjb25zdCBpbnN0YWxsVGFzayA9IHB5dGhvblByb2plY3QudGFza3MudHJ5RmluZChcImluc3RhbGxcIik7XG5cbiAgICAgIChpbnN0YWxsVGFzaz8uc3RlcHMgfHwgW10pLmZvckVhY2goKHN0ZXApID0+IHtcbiAgICAgICAgdGhpcy5jb3B5U3RlcEludG9UYXNrKHN0ZXAsIGluc3RhbGxQeVRhc2ssIHB5dGhvblByb2plY3QpO1xuICAgICAgfSk7XG5cbiAgICAgIGluc3RhbGxUYXNrPy5yZXNldCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFuIGluc3RhbGwgdGFzayB0byB0aGUgbW9ub3JlcG8gdG8gaW5jbHVkZSBydW5uaW5nIHRoZSBpbnN0YWxsLXB5IGNvbW1hbmQgc2VyaWFsbHkgdG8gYXZvaWQgY29uZmxpY3Rpbmcgd3JpdGVzXG4gICAgLy8gdG8gYSBzaGFyZWQgdmlydHVhbCBlbnYuIFRoaXMgaXMgYWxzbyBtYW5hZ2VkIGJ5IG54IHNvIHRoYXQgaW5zdGFsbHMgb2NjdXIgaW4gZGVwZW5kZW5jeSBvcmRlci5cbiAgICBjb25zdCBtb25vcmVwb0luc3RhbGxUYXNrID1cbiAgICAgIHRoaXMudGFza3MudHJ5RmluZChcImluc3RhbGxcIikgPz8gdGhpcy5hZGRUYXNrKFwiaW5zdGFsbFwiKTtcbiAgICBtb25vcmVwb0luc3RhbGxUYXNrLmV4ZWMoXG4gICAgICBgJHtidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICB0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXJcbiAgICAgICl9IG54IHJ1bi1tYW55IC0tdGFyZ2V0IGluc3RhbGwtcHkgLS1wcm9qZWN0cyAke3B5dGhvblByb2plY3RzXG4gICAgICAgIC5tYXAoKHByb2plY3QpID0+IHByb2plY3QubmFtZSlcbiAgICAgICAgLmpvaW4oXCIsXCIpfSAtLXBhcmFsbGVsPTFgXG4gICAgKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgbnguanNvbiB0byBlbnN1cmUgdGhhdCBpbnN0YWxsLXB5IGZvbGxvd3MgZGVwZW5kZW5jeSBvcmRlclxuICAgIHRoaXMubnhKc29uLmFkZE92ZXJyaWRlKFwidGFyZ2V0RGVwZW5kZW5jaWVzLmluc3RhbGwtcHlcIiwgW1xuICAgICAge1xuICAgICAgICB0YXJnZXQ6IFwiaW5zdGFsbC1weVwiLFxuICAgICAgICBwcm9qZWN0czogXCJkZXBlbmRlbmNpZXNcIixcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogQ29waWVzIHRoZSBnaXZlbiBzdGVwIGludG8gdGhlIGdpdmVuIHRhc2suIFN0ZXAgYW5kIFRhc2sgbXVzdCBiZSBmcm9tIHRoZSBnaXZlbiBQcm9qZWN0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGNvcHlTdGVwSW50b1Rhc2soc3RlcDogVGFza1N0ZXAsIHRhc2s6IFRhc2ssIHByb2plY3Q6IFByb2plY3QpIHtcbiAgICBpZiAoc3RlcC5leGVjKSB7XG4gICAgICB0YXNrLmV4ZWMoc3RlcC5leGVjLCB7IG5hbWU6IHN0ZXAubmFtZSwgY3dkOiBzdGVwLmN3ZCB9KTtcbiAgICB9IGVsc2UgaWYgKHN0ZXAuc2F5KSB7XG4gICAgICB0YXNrLnNheShzdGVwLnNheSwgeyBuYW1lOiBzdGVwLm5hbWUsIGN3ZDogc3RlcC5jd2QgfSk7XG4gICAgfSBlbHNlIGlmIChzdGVwLnNwYXduKSB7XG4gICAgICBjb25zdCBzdGVwVG9TcGF3biA9IHByb2plY3QudGFza3MudHJ5RmluZChzdGVwLnNwYXduKTtcbiAgICAgIGlmIChzdGVwVG9TcGF3bikge1xuICAgICAgICB0YXNrLnNwYXduKHN0ZXBUb1NwYXduLCB7IG5hbWU6IHN0ZXAubmFtZSwgY3dkOiBzdGVwLmN3ZCB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0ZXAuYnVpbHRpbikge1xuICAgICAgdGFzay5idWlsdGluKHN0ZXAuYnVpbHRpbik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgcGFzc2VkIGluIHByb2plY3QgaXMgb2YgdHlwZSBOb2RlUHJvamVjdC5cbiAqXG4gKiBAcGFyYW0gcHJvamVjdCBQcm9qZWN0IGluc3RhbmNlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvamVjdCBpbnN0YW5jZSBpcyBvZiB0eXBlIE5vZGVQcm9qZWN0LlxuICovXG5mdW5jdGlvbiBpc05vZGVQcm9qZWN0KHByb2plY3Q6IGFueSkge1xuICByZXR1cm4gcHJvamVjdCBpbnN0YW5jZW9mIE5vZGVQcm9qZWN0IHx8IHByb2plY3QucGFja2FnZTtcbn1cblxuZnVuY3Rpb24gZ2V0UGx1Z2luUGF0aCgpIHtcbiAgcmV0dXJuIHBhdGguam9pbihfX2Rpcm5hbWUsIFwicGx1Z2luL254LW1vbm9yZXBvLXBsdWdpbi5qc1wiKTtcbn1cbiJdfQ==
\ No newline at end of file
+//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibngtbW9ub3JlcG8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbngtbW9ub3JlcG8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtzQ0FDc0M7QUFDdEMsNkJBQTZCO0FBQzdCLG1DQVNnQjtBQUNoQixzREFJK0I7QUFDL0IsOENBQWtEO0FBQ2xELHNEQUcrQjtBQUMvQiw2Q0FBeUM7QUFFekMseURBQW9FO0FBRXBFOzs7OztHQUtHO0FBQ0gsU0FBZ0Isc0JBQXNCLENBQ3BDLGNBQWtDLEVBQ2xDLEdBQUcsSUFBYztJQUVqQixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUMvRCxRQUFRLGNBQWMsRUFBRTtRQUN0QixLQUFLLCtCQUFrQixDQUFDLElBQUksQ0FBQztRQUM3QixLQUFLLCtCQUFrQixDQUFDLEtBQUs7WUFDM0IsT0FBTyxPQUFPLFVBQVUsRUFBRSxDQUFDO1FBQzdCLEtBQUssK0JBQWtCLENBQUMsSUFBSTtZQUMxQixPQUFPLE9BQU8sVUFBVSxFQUFFLENBQUM7UUFDN0I7WUFDRSxPQUFPLE1BQU0sVUFBVSxFQUFFLENBQUM7S0FDN0I7QUFDSCxDQUFDO0FBZEQsd0RBY0M7QUFFRCxTQUFTLFVBQVUsQ0FBQyxjQUFrQztJQUNwRCxRQUFRLGNBQWMsRUFBRTtRQUN0QixLQUFLLCtCQUFrQixDQUFDLElBQUksQ0FBQztRQUM3QixLQUFLLCtCQUFrQixDQUFDLEtBQUs7WUFDM0IsT0FBTyxVQUFVLENBQUM7UUFDcEIsS0FBSywrQkFBa0IsQ0FBQyxJQUFJO1lBQzFCLE9BQU8sVUFBVSxDQUFDO1FBQ3BCO1lBQ0UsT0FBTyxTQUFTLENBQUM7S0FDcEI7QUFDSCxDQUFDO0FBcUlEOzs7OztHQUtHO0FBQ0gsTUFBYSxpQkFBa0IsU0FBUSw4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QUFFLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyx1QkFBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQy9FLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQ29weXJpZ2h0IFtBbWF6b24uY29tXShodHRwOi8vYW1hem9uLmNvbS8pLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjAgKi9cbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7XG4gIERlcGVuZGVuY3ksXG4gIERlcGVuZGVuY3lUeXBlLFxuICBJZ25vcmVGaWxlLFxuICBKc29uRmlsZSxcbiAgUHJvamVjdCxcbiAgVGFzayxcbiAgVGFza1N0ZXAsXG4gIFlhbWxGaWxlLFxufSBmcm9tIFwicHJvamVuXCI7XG5pbXBvcnQge1xuICBOb2RlUGFja2FnZSxcbiAgTm9kZVBhY2thZ2VNYW5hZ2VyLFxuICBOb2RlUHJvamVjdCxcbn0gZnJvbSBcInByb2plbi9saWIvamF2YXNjcmlwdFwiO1xuaW1wb3J0IHsgUHl0aG9uUHJvamVjdCB9IGZyb20gXCJwcm9qZW4vbGliL3B5dGhvblwiO1xuaW1wb3J0IHtcbiAgVHlwZVNjcmlwdFByb2plY3QsXG4gIFR5cGVTY3JpcHRQcm9qZWN0T3B0aW9ucyxcbn0gZnJvbSBcInByb2plbi9saWIvdHlwZXNjcmlwdFwiO1xuaW1wb3J0IHsgTnhQcm9qZWN0IH0gZnJvbSBcIi4vbngtcHJvamVjdFwiO1xuaW1wb3J0IHsgTnggfSBmcm9tIFwiLi9ueC10eXBlc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9DT05GSUcsIFN5bmNwYWNrQ29uZmlnIH0gZnJvbSBcIi4vc3luY3BhY2stb3B0aW9uc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGUgY29tbWFuZCB0byBydW4gYmFzZWQgb24gcGFja2FnZSBtYW5hZ2VyIGNvbmZpZ3VyZWQuXG4gKlxuICogQHBhcmFtIHBhY2thZ2VNYW5hZ2VyIHBhY2thZ2UgbWFuYWdlciBiZWluZyB1c2VkLlxuICogQHBhcmFtIGFyZ3MgYXJncyB0byBhcHBlbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICBwYWNrYWdlTWFuYWdlcjogTm9kZVBhY2thZ2VNYW5hZ2VyLFxuICAuLi5hcmdzOiBzdHJpbmdbXVxuKSB7XG4gIGNvbnN0IGFyZ0xpdGVyYWwgPSBhcmdzLmxlbmd0aCA+IDAgPyBgICR7YXJncy5qb2luKFwiIFwiKX1gIDogXCJcIjtcbiAgc3dpdGNoIChwYWNrYWdlTWFuYWdlcikge1xuICAgIGNhc2UgTm9kZVBhY2thZ2VNYW5hZ2VyLllBUk46XG4gICAgY2FzZSBOb2RlUGFja2FnZU1hbmFnZXIuWUFSTjI6XG4gICAgICByZXR1cm4gYHlhcm4ke2FyZ0xpdGVyYWx9YDtcbiAgICBjYXNlIE5vZGVQYWNrYWdlTWFuYWdlci5QTlBNOlxuICAgICAgcmV0dXJuIGBwbnB4JHthcmdMaXRlcmFsfWA7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBgbnB4JHthcmdMaXRlcmFsfWA7XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluQ29tbWFuZChwYWNrYWdlTWFuYWdlcjogTm9kZVBhY2thZ2VNYW5hZ2VyKTogc3RyaW5nIHtcbiAgc3dpdGNoIChwYWNrYWdlTWFuYWdlcikge1xuICAgIGNhc2UgTm9kZVBhY2thZ2VNYW5hZ2VyLllBUk46XG4gICAgY2FzZSBOb2RlUGFja2FnZU1hbmFnZXIuWUFSTjI6XG4gICAgICByZXR1cm4gYHlhcm4gYmluYDtcbiAgICBjYXNlIE5vZGVQYWNrYWdlTWFuYWdlci5QTlBNOlxuICAgICAgcmV0dXJuIGBwbnBtIGJpbmA7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBgbnBtIGJpbmA7XG4gIH1cbn1cblxuLyoqXG4gKiBXb3Jrc3BhY2UgY29uZmlndXJhdGlvbnMuXG4gKlxuICogQHNlZSBodHRwczovL2NsYXNzaWMueWFybnBrZy5jb20vbGFuZy9lbi9kb2NzL3dvcmtzcGFjZXMvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV29ya3NwYWNlQ29uZmlnIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgcGFja2FnZSBnbG9icyB0byBleGNsdWRlIGZyb20gaG9pc3RpbmcgaW4gdGhlIHdvcmtzcGFjZS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2NsYXNzaWMueWFybnBrZy5jb20vYmxvZy8yMDE4LzAyLzE1L25vaG9pc3QvXG4gICAqL1xuICByZWFkb25seSBub0hvaXN0Pzogc3RyaW5nW107XG5cbiAgLyoqXG4gICAqIERpc2FibGUgYXV0b21hdGljYWxseSBhcHBseWluZyBgbm9Ib2lzdGAgbG9naWMgZm9yIGFsbCBzdWItcHJvamVjdCBcImJ1bmRsZWREZXBlbmRlbmNpZXNcIi5cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHJlYWRvbmx5IGRpc2FibGVOb0hvaXN0QnVuZGxlZD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIExpbmtzIGFsbCBsb2NhbCB3b3Jrc3BhY2UgcHJvamVjdCBiaW5zIHNvIHRoZXkgY2FuIGJlIHVzZWQgZm9yIGxvY2FsIGRldmVsb3BtZW50LlxuICAgKlxuICAgKiBQYWNrYWdlIGJpbnMgYXJlIG9ubHkgbGlua2VkIHdoZW4gaW5zdGFsbGVkIGZyb20gdGhlIHJlZ2lzdHJ5LCBob3dldmVyIGl0IGlzIHZlcnkgdXNlZnVsXG4gICAqIGZvciBtb25vcmVwbyBkZXZlbG9wbWVudCB0byBhbHNvIHV0aWxpemUgdGhlc2UgYmluIHNjcmlwdHMuIFdoZW4gZW5hYmxlZCwgdGhpcyBmbGFnIHdpbGxcbiAgICogcmVjdXJzaXZlbHkgbGluayBhbGwgYmlucyBmcm9tIHBhY2thZ2VzLmpzb24gZmlsZXMgdG8gdGhlIHJvb3Qgbm9kZV9tb2R1bGVzLy5iaW4uXG4gICAqL1xuICByZWFkb25seSBsaW5rTG9jYWxXb3Jrc3BhY2VCaW5zPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogTGlzdCBvZiBhZGRpdGlvbmFsIHBhY2thZ2UgZ2xvYnMgdG8gaW5jbHVkZSBpbiB0aGUgd29ya3NwYWNlLlxuICAgKlxuICAgKiBBbGwgcGFja2FnZXMgd2hpY2ggYXJlIHBhcmVudGVkIGJ5IHRoZSBtb25vcmVwbyBhcmUgYXV0b21hdGljYWxseSBhZGRlZCB0byB0aGUgd29ya3NwYWNlLCBidXQgeW91IGNhbiB1c2UgdGhpc1xuICAgKiBwcm9wZXJ0eSB0byBzcGVjaWZ5IGFueSBhZGRpdGlvbmFsIHBhdGhzIHRvIHBhY2thZ2VzIHdoaWNoIG1heSBub3QgYmUgbWFuYWdlZCBieSBwcm9qZW4uXG4gICAqL1xuICByZWFkb25seSBhZGRpdGlvbmFsUGFja2FnZXM/OiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGZvciBNb25vcmVwbyBVcGdyYWRlIERlcHMgdGFzay5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNb25vcmVwb1VwZ3JhZGVEZXBzT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0YXNrIHRvIGNyZWF0ZS5cbiAgICpcbiAgICogQGRlZmF1bHQgdXBncmFkZS1kZXBzXG4gICAqL1xuICByZWFkb25seSB0YXNrTmFtZT86IHN0cmluZztcblxuICAvKipcbiAgICogU3luY3BhY2sgY29uZmlndXJhdGlvbi5cbiAgICpcbiAgICogTm8gbWVyZ2luZyBpcyBwZXJmb3JtZWQgYW5kIGFzIHN1Y2ggYSBjb21wbGV0ZSBzeW5jcGFja0NvbmZpZyBpcyByZXF1aXJlZCBpZiBzdXBwbGllZC5cbiAgICpcbiAgICogQGRlZmF1bHQgU3luY3BhY2tDb25maWcuREVGQVVMVF9DT05GSUdcbiAgICovXG4gIHJlYWRvbmx5IHN5bmNwYWNrQ29uZmlnPzogU3luY3BhY2tDb25maWc7XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgTnhNb25vcmVwb1Byb2plY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTnhNb25vcmVwb1Byb2plY3RPcHRpb25zIGV4dGVuZHMgVHlwZVNjcmlwdFByb2plY3RPcHRpb25zIHtcbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIE5YLlxuICAgKi9cbiAgcmVhZG9ubHkgbnhDb25maWc/OiBOeC5Xb3Jrc3BhY2VDb25maWc7XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gZm9yIHdvcmtzcGFjZS5cbiAgICovXG4gIHJlYWRvbmx5IHdvcmtzcGFjZUNvbmZpZz86IFdvcmtzcGFjZUNvbmZpZztcblxuICAvKipcbiAgICogV2hldGhlciB0byBpbmNsdWRlIGFuIHVwZ3JhZGUtZGVwcyB0YXNrIGF0IHRoZSByb290IG9mIHRoZSBtb25vcmVwbyB3aGljaCB3aWxsIHVwZ3JhZGUgYWxsIGRlcGVuZGVuY2llcy5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgcmVhZG9ubHkgbW9ub3JlcG9VcGdyYWRlRGVwcz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIE1vbm9yZXBvIFVwZ3JhZGUgRGVwcyBvcHRpb25zLlxuICAgKlxuICAgKiBUaGlzIGlzIG9ubHkgdXNlZCBpZiBtb25vcmVwb1VwZ3JhZGVEZXBzIGlzIHRydWUuXG4gICAqXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgcmVhZG9ubHkgbW9ub3JlcG9VcGdyYWRlRGVwc09wdGlvbnM/OiBNb25vcmVwb1VwZ3JhZGVEZXBzT3B0aW9ucztcbn1cblxuLyoqXG4gKlxuICogQHNlZSBodHRwczovL254LmRldi9wYWNrYWdlcy9ueC9kb2N1bWVudHMvcnVuLW1hbnkjb3B0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIE54UnVuTWFueU9wdGlvbnMge1xuICAvKiogVGFzayB0byBydW4gZm9yIGFmZmVjdGVkIHByb2plY3RzICovXG4gIHJlYWRvbmx5IHRhcmdldDogc3RyaW5nO1xuICAvKiogVGhpcyBpcyB0aGUgY29uZmlndXJhdGlvbiB0byB1c2Ugd2hlbiBwZXJmb3JtaW5nIHRhc2tzIG9uIHByb2plY3RzICovXG4gIHJlYWRvbmx5IGNvbmZpZ3VyYXRpb24/OiBzdHJpbmc7XG4gIC8qKiBFeGNsdWRlIGNlcnRhaW4gcHJvamVjdHMgZnJvbSBiZWluZyBwcm9jZXNzZWQgKi9cbiAgcmVhZG9ubHkgZXhjbHVkZT86IHN0cmluZztcbiAgLyoqXG4gICAqIERvIG5vdCBzdG9wIGNvbW1hbmQgZXhlY3V0aW9uIGFmdGVyIHRoZSBmaXJzdCBmYWlsZWQgdGFzay5cbiAgICovXG4gIHJlYWRvbmx5IG5vQmFpbD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBEZWZpbmVzIGhvdyBOeCBlbWl0cyBvdXRwdXRzIHRhc2tzIGxvZ3NcbiAgICogQGRlZmF1bHQgXCJzdHJlYW1cIlxuICAgKi9cbiAgcmVhZG9ubHkgb3V0cHV0U3R5bGU/OlxuICAgIHwgXCJkeW5hbWljXCJcbiAgICB8IFwic3RhdGljXCJcbiAgICB8IFwic3RyZWFtXCJcbiAgICB8IFwic3RyZWFtLXdpdGhvdXQtcHJlZml4ZXNcIjtcbiAgLyoqXG4gICAqIE1heCBudW1iZXIgb2YgcGFyYWxsZWwgcHJvY2Vzc2VzXG4gICAqIEBkZWZhdWx0IDNcbiAgICovXG4gIHJlYWRvbmx5IHBhcmFsbGVsPzogbnVtYmVyO1xuICAvKiogUHJvamVjdCB0byBydW4gYXMgbGlzdCBwcm9qZWN0IG5hbWVzIGFuZC9vciBwYXR0ZXJucy4gKi9cbiAgcmVhZG9ubHkgcHJvamVjdHM/OiBzdHJpbmdbXTtcbiAgLyoqIFRoaXMgaXMgdGhlIG5hbWUgb2YgdGhlIHRhc2tzIHJ1bm5lciBjb25maWd1cmF0aW9uIGluIG54Lmpzb24gKi9cbiAgcmVhZG9ubHkgcnVubmVyPzogc3RyaW5nO1xuICAvKiogUmVydW4gdGhlIHRhc2tzIGV2ZW4gd2hlbiB0aGUgcmVzdWx0cyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjYWNoZS4gKi9cbiAgcmVhZG9ubHkgc2tpcENhY2hlPzogYm9vbGVhbjtcbiAgLyoqIElnbm9yZSBjeWNsZXMgaW4gdGhlIHRhc2sgZ3JhcGggKi9cbiAgcmVhZG9ubHkgaWdub3JlQ3ljbGVzPzogYm9vbGVhbjtcbiAgLyoqIFByaW50cyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb21tYW5kcyAoZS5nLiBzdGFjayB0cmFjZXMpLiAqL1xuICByZWFkb25seSB2ZXJib3NlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGlzIHByb2plY3QgdHlwZSB3aWxsIGJvb3RzdHJhcCBhIE5YIGJhc2VkIG1vbm9yZXBvIHdpdGggc3VwcG9ydCBmb3IgcG9seWdvdFxuICogYnVpbGRzLCBidWlsZCBjYWNoaW5nLCBkZXBlbmRlbmN5IGdyYXBoIHZpc3VhbGl6YXRpb24gYW5kIG11Y2ggbW9yZS5cbiAqXG4gKiBAcGppZCBueC1tb25vcmVwb1xuICovXG5leHBvcnQgY2xhc3MgTnhNb25vcmVwb1Byb2plY3QgZXh0ZW5kcyBUeXBlU2NyaXB0UHJvamVjdCB7XG4gIC8vIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZXNcbiAgcHJpdmF0ZSByZWFkb25seSBueENvbmZpZz86IE54LldvcmtzcGFjZUNvbmZpZztcbiAgcHJpdmF0ZSByZWFkb25seSB3b3Jrc3BhY2VDb25maWc/OiBXb3Jrc3BhY2VDb25maWc7XG4gIHByaXZhdGUgcmVhZG9ubHkgd29ya3NwYWNlUGFja2FnZXM6IHN0cmluZ1tdO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgbnhKc29uOiBKc29uRmlsZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zOiBOeE1vbm9yZXBvUHJvamVjdE9wdGlvbnM7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogTnhNb25vcmVwb1Byb2plY3RPcHRpb25zKSB7XG4gICAgc3VwZXIoe1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGdpdGh1Yjogb3B0aW9ucy5naXRodWIgPz8gZmFsc2UsXG4gICAgICBwYWNrYWdlOiBvcHRpb25zLnBhY2thZ2UgPz8gZmFsc2UsXG4gICAgICBwcmV0dGllcjogb3B0aW9ucy5wcmV0dGllciA/PyB0cnVlLFxuICAgICAgcHJvamVucmNUczogdHJ1ZSxcbiAgICAgIHJlbGVhc2U6IG9wdGlvbnMucmVsZWFzZSA/PyBmYWxzZSxcbiAgICAgIGplc3Q6IG9wdGlvbnMuamVzdCA/PyBmYWxzZSxcbiAgICAgIGRlZmF1bHRSZWxlYXNlQnJhbmNoOiBvcHRpb25zLmRlZmF1bHRSZWxlYXNlQnJhbmNoID8/IFwibWFpbmxpbmVcIixcbiAgICAgIHNhbXBsZUNvZGU6IGZhbHNlLCAvLyByb290IHNob3VsZCBuZXZlciBoYXZlIHNhbXBsZSBjb2RlLFxuICAgICAgZ2l0aWdub3JlOiBbXCIubngvY2FjaGVcIl0sXG4gICAgICBlc2xpbnRPcHRpb25zOiBvcHRpb25zLmVzbGludE9wdGlvbnMgPz8ge1xuICAgICAgICBkaXJzOiBbXCIuXCJdLFxuICAgICAgICBpZ25vcmVQYXR0ZXJuczogW1wicGFja2FnZXMvKiovKi4qXCJdLFxuICAgICAgfSxcbiAgICAgIHRzY29uZmlnOiBvcHRpb25zLnRzY29uZmlnID8/IHtcbiAgICAgICAgY29tcGlsZXJPcHRpb25zOiB7XG4gICAgICAgICAgcm9vdERpcjogXCIuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IFtcIioqLyoudHNcIl0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAvLyBlbmdpbmVzXG4gICAgdGhpcy5wYWNrYWdlLmFkZEVuZ2luZShcIm5vZGVcIiwgXCI+PTE2XCIpO1xuICAgIHN3aXRjaCAodGhpcy5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyKSB7XG4gICAgICBjYXNlIE5vZGVQYWNrYWdlTWFuYWdlci5QTlBNOiB7XG4gICAgICAgIC8vIGh0dHBzOi8vcG5wbS5pby9wYWNrYWdlX2pzb25cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BucG0vcG5wbS9yZWxlYXNlcy90YWcvdjguMC4wXG4gICAgICAgIHRoaXMucGFja2FnZS5hZGRFbmdpbmUoXCJwbnBtXCIsIFwiPj04XCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgTm9kZVBhY2thZ2VNYW5hZ2VyLllBUk46IHtcbiAgICAgICAgdGhpcy5wYWNrYWdlLmFkZEVuZ2luZShcInlhcm5cIiwgXCI+PTEgPDJcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBOb2RlUGFja2FnZU1hbmFnZXIuWUFSTjI6IHtcbiAgICAgICAgdGhpcy5wYWNrYWdlLmFkZEVuZ2luZShcInlhcm5cIiwgXCI+PTIgPDNcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubnhDb25maWcgPSBvcHRpb25zLm54Q29uZmlnO1xuICAgIHRoaXMud29ya3NwYWNlQ29uZmlnID0gb3B0aW9ucy53b3Jrc3BhY2VDb25maWc7XG4gICAgdGhpcy53b3Jrc3BhY2VQYWNrYWdlcyA9IG9wdGlvbnMud29ya3NwYWNlQ29uZmlnPy5hZGRpdGlvbmFsUGFja2FnZXMgPz8gW107XG5cbiAgICAvLyBOZXZlciBwdWJsaXNoIGEgbW9ub3JlcG8gcm9vdCBwYWNrYWdlLlxuICAgIHRoaXMucGFja2FnZS5hZGRGaWVsZChcInByaXZhdGVcIiwgdHJ1ZSk7XG5cbiAgICAvLyBBZGQgYWxpYXMgdGFzayBmb3IgXCJwcm9qZW5cIiB0byBzeW50aGVzaXplIHdvcmtzcGFjZVxuICAgIHRoaXMuYWRkVGFzayhcInN5bnRoLXdvcmtzcGFjZVwiLCB7XG4gICAgICBleGVjOiBidWlsZEV4ZWN1dGFibGVDb21tYW5kKHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlciwgXCJwcm9qZW5cIiksXG4gICAgICBkZXNjcmlwdGlvbjogXCJTeW50aGVzaXplIHdvcmtzcGFjZVwiLFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRUYXNrKFwicnVuLW1hbnlcIiwge1xuICAgICAgcmVjZWl2ZUFyZ3M6IHRydWUsXG4gICAgICBleGVjOiBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICB0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXIsXG4gICAgICAgIFwibnhcIixcbiAgICAgICAgXCJydW4tbWFueVwiXG4gICAgICApLFxuICAgICAgZW52OiB7XG4gICAgICAgIE5YX05PTl9OQVRJVkVfSEFTSEVSOiBcInRydWVcIixcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjogXCJSdW4gdGFzayBhZ2FpbnN0IG11bHRpcGxlIHdvcmtzcGFjZSBwcm9qZWN0c1wiLFxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRUYXNrKFwiZ3JhcGhcIiwge1xuICAgICAgcmVjZWl2ZUFyZ3M6IHRydWUsXG4gICAgICBleGVjOiBidWlsZEV4ZWN1dGFibGVDb21tYW5kKHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlciwgXCJueFwiLCBcImdyYXBoXCIpLFxuICAgICAgZGVzY3JpcHRpb246IFwiR2VuZXJhdGUgZGVwZW5kZW5jeSBncmFwaCBmb3IgbW9ub3JlcG9cIixcbiAgICB9KTtcblxuICAgIC8vIE1hcCB0YXNrcyB0byBueCBydW4tbWFueVxuICAgIGlmIChvcHRpb25zLnNjcmlwdHMgPT0gbnVsbCB8fCBvcHRpb25zLnNjcmlwdHMuYnVpbGQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5fb3ZlcnJpZGVOeEJ1aWxkVGFzayh0aGlzLmJ1aWxkVGFzaywgeyB0YXJnZXQ6IFwiYnVpbGRcIiB9LCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0c1tcInByZS1jb21waWxlXCJdID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2sodGhpcy5wcmVDb21waWxlVGFzaywgeyB0YXJnZXQ6IFwicHJlLWNvbXBpbGVcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy5jb21waWxlID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2sodGhpcy5jb21waWxlVGFzaywgeyB0YXJnZXQ6IFwiY29tcGlsZVwiIH0pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zY3JpcHRzID09IG51bGwgfHwgb3B0aW9ucy5zY3JpcHRzW1wicG9zdC1jb21waWxlXCJdID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2sodGhpcy5wb3N0Q29tcGlsZVRhc2ssIHtcbiAgICAgICAgdGFyZ2V0OiBcInBvc3QtY29tcGlsZVwiLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNjcmlwdHMgPT0gbnVsbCB8fCBvcHRpb25zLnNjcmlwdHMudGVzdCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9vdmVycmlkZU54QnVpbGRUYXNrKHRoaXMudGVzdFRhc2ssIHsgdGFyZ2V0OiBcInRlc3RcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy5lc2xpbnQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5fb3ZlcnJpZGVOeEJ1aWxkVGFzayh0aGlzLmVzbGludD8uZXNsaW50VGFzaywgeyB0YXJnZXQ6IFwiZXNsaW50XCIgfSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNjcmlwdHMgPT0gbnVsbCB8fCBvcHRpb25zLnNjcmlwdHMucGFja2FnZSA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9vdmVycmlkZU54QnVpbGRUYXNrKHRoaXMucGFja2FnZVRhc2ssIHsgdGFyZ2V0OiBcInBhY2thZ2VcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy5wcmVwYXJlID09IG51bGwpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlTnhCdWlsZFRhc2soXCJwcmVwYXJlXCIsIHsgdGFyZ2V0OiBcInByZXBhcmVcIiB9KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2NyaXB0cyA9PSBudWxsIHx8IG9wdGlvbnMuc2NyaXB0cy53YXRjaCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9vdmVycmlkZU54QnVpbGRUYXNrKHRoaXMud2F0Y2hUYXNrLCB7XG4gICAgICAgIHRhcmdldDogXCJ3YXRjaFwiLFxuICAgICAgICBub0JhaWw6IGZhbHNlLFxuICAgICAgICBpZ25vcmVDeWNsZXM6IHRydWUsXG4gICAgICAgIHNraXBDYWNoZTogdHJ1ZSxcbiAgICAgICAgb3V0cHV0U3R5bGU6IFwic3RyZWFtXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZERldkRlcHMoXCJueFwiLCBcIkBucndsL2NsaVwiLCBcIkBucndsL3dvcmtzcGFjZVwiKTtcbiAgICB0aGlzLmFkZERlcHMoXCJhd3MtY2RrLWxpYlwiLCBcImNvbnN0cnVjdHNcIiwgXCJjZGstbmFnXCIpOyAvLyBOZWVkZWQgYXMgdGhpcyBjYW4gYmUgYnVuZGxlZCBpbiBhd3MtcHJvdG90eXBpbmctc2RrXG4gICAgdGhpcy5wYWNrYWdlLmFkZFBhY2thZ2VSZXNvbHV0aW9ucyhcIkB0eXBlcy9iYWJlbF9fdHJhdmVyc2VANy4xOC4yXCIpO1xuXG4gICAgaWYgKG9wdGlvbnMubW9ub3JlcG9VcGdyYWRlRGVwcyAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuYWRkRGV2RGVwcyhcIm5wbS1jaGVjay11cGRhdGVzXCIsIFwic3luY3BhY2tcIik7XG5cbiAgICAgIGNvbnN0IHVwZ3JhZGVEZXBzVGFzayA9IHRoaXMuYWRkVGFzayhcbiAgICAgICAgb3B0aW9ucy5tb25vcmVwb1VwZ3JhZGVEZXBzT3B0aW9ucz8udGFza05hbWUgfHwgXCJ1cGdyYWRlLWRlcHNcIlxuICAgICAgKTtcbiAgICAgIHVwZ3JhZGVEZXBzVGFzay5leGVjKFxuICAgICAgICBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICAgIHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlcixcbiAgICAgICAgICBcIm5wbS1jaGVjay11cGRhdGVzXCIsXG4gICAgICAgICAgXCItLWRlZXBcIixcbiAgICAgICAgICBcIi0tcmVqZWN0VmVyc2lvblwiLFxuICAgICAgICAgIFwiMC4wLjBcIixcbiAgICAgICAgICBcIi11XCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHVwZ3JhZGVEZXBzVGFzay5leGVjKFxuICAgICAgICBidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICAgIHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlcixcbiAgICAgICAgICBcInN5bmNwYWNrXCIsXG4gICAgICAgICAgXCJmaXgtbWlzbWF0Y2hlc1wiXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICB1cGdyYWRlRGVwc1Rhc2suZXhlYyhgJHt0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXJ9IGluc3RhbGxgKTtcbiAgICAgIHVwZ3JhZGVEZXBzVGFzay5leGVjKFxuICAgICAgICBidWlsZEV4ZWN1dGFibGVDb21tYW5kKHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlciwgXCJwcm9qZW5cIilcbiAgICAgICk7XG5cbiAgICAgIG5ldyBKc29uRmlsZSh0aGlzLCBcIi5zeW5jcGFja3JjLmpzb25cIiwge1xuICAgICAgICBvYmo6XG4gICAgICAgICAgb3B0aW9ucy5tb25vcmVwb1VwZ3JhZGVEZXBzT3B0aW9ucz8uc3luY3BhY2tDb25maWcgfHwgREVGQVVMVF9DT05GSUcsXG4gICAgICAgIHJlYWRvbmx5OiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3B0aW9ucy5ueENvbmZpZz8ubnhDbG91ZFJlYWRPbmx5QWNjZXNzVG9rZW4gJiZcbiAgICAgIHRoaXMuYWRkRGV2RGVwcyhcIkBucndsL254LWNsb3VkXCIpO1xuXG4gICAgbmV3IElnbm9yZUZpbGUodGhpcywgXCIubnhpZ25vcmVcIikuZXhjbHVkZShcbiAgICAgIFwidGVzdC1yZXBvcnRzXCIsXG4gICAgICBcInRhcmdldFwiLFxuICAgICAgXCIuZW52XCIsXG4gICAgICBcIi5weXRlc3RfY2FjaGVcIixcbiAgICAgIC4uLih0aGlzLm54Q29uZmlnPy5ueElnbm9yZSB8fCBbXSlcbiAgICApO1xuXG4gICAgdGhpcy5ueEpzb24gPSBuZXcgSnNvbkZpbGUodGhpcywgXCJueC5qc29uXCIsIHtcbiAgICAgIG9iajoge1xuICAgICAgICBleHRlbmRzOiBcIkBucndsL3dvcmtzcGFjZS9wcmVzZXRzL25wbS5qc29uXCIsXG4gICAgICAgIG5wbVNjb3BlOiBcIm1vbm9yZXBvXCIsXG4gICAgICAgIHRhc2tzUnVubmVyT3B0aW9uczoge1xuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHJ1bm5lcjogb3B0aW9ucy5ueENvbmZpZz8ubnhDbG91ZFJlYWRPbmx5QWNjZXNzVG9rZW5cbiAgICAgICAgICAgICAgPyBcIkBucndsL254LWNsb3VkXCJcbiAgICAgICAgICAgICAgOiBcIkBucndsL3dvcmtzcGFjZS90YXNrcy1ydW5uZXJzL2RlZmF1bHRcIixcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgdXNlRGFlbW9uUHJvY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGNhY2hlYWJsZU9wZXJhdGlvbnM6IG9wdGlvbnMubnhDb25maWc/LmNhY2hlYWJsZU9wZXJhdGlvbnMgfHwgW1xuICAgICAgICAgICAgICAgIFwiYnVpbGRcIixcbiAgICAgICAgICAgICAgICBcInRlc3RcIixcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9wdGlvbnMubnhDb25maWc/Lm54Q2xvdWRSZWFkT25seUFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBuYW1lZElucHV0czoge1xuICAgICAgICAgIC8vIGh0dHBzOi8vbnguZGV2L21vcmUtY29uY2VwdHMvY3VzdG9taXppbmctaW5wdXRzI2RlZmF1bHRzXG4gICAgICAgICAgZGVmYXVsdDogW1wie3Byb2plY3RSb290fS8qKi8qXCJdLFxuICAgICAgICAgIC4uLm9wdGlvbnMubnhDb25maWc/Lm5hbWVkSW5wdXRzLFxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXREZWZhdWx0czogb3B0aW9ucy5ueENvbmZpZz8udGFyZ2V0RGVmYXVsdHMsXG4gICAgICAgIHRhcmdldERlcGVuZGVuY2llczoge1xuICAgICAgICAgIGJ1aWxkOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRhcmdldDogXCJidWlsZFwiLFxuICAgICAgICAgICAgICBwcm9qZWN0czogXCJkZXBlbmRlbmNpZXNcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICAuLi4odGhpcy5ueENvbmZpZz8udGFyZ2V0RGVwZW5kZW5jaWVzIHx8IHt9KSxcbiAgICAgICAgfSxcbiAgICAgICAgYWZmZWN0ZWQ6IHtcbiAgICAgICAgICBkZWZhdWx0QmFzZTogdGhpcy5ueENvbmZpZz8uYWZmZWN0ZWRCcmFuY2ggfHwgXCJtYWlubGluZVwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgTlhQcm9qZWN0IGlzIGFkZGVkIHdoZW4gYWRkaW5nIHN1YnByb2plY3RzIHRvIHRoZSBtb25vcmVwby5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBzdWJwcm9qZWN0IHByb2plY3QgdG8gYWRkLlxuICAgKi9cbiAgX2FkZFN1YlByb2plY3Qoc3VicHJvamVjdDogUHJvamVjdCkge1xuICAgICFOeFByb2plY3Qub2Yoc3VicHJvamVjdCkgJiZcbiAgICAgIHN1YnByb2plY3QuX2FkZENvbXBvbmVudChuZXcgTnhQcm9qZWN0KHN1YnByb2plY3QpKTtcbiAgICBzdXBlci5fYWRkU3ViUHJvamVjdChzdWJwcm9qZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gZm9ybWF0IGBucHggbnggcnVuLW1hbnkgLi4uYCBzdHlsZSBjb21tYW5kLlxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKi9cbiAgcHVibGljIGZvcm1hdE54UnVuTWFueUNvbW1hbmQob3B0aW9uczogTnhSdW5NYW55T3B0aW9ucyk6IHN0cmluZyB7XG4gICAgY29uc3QgYXJnczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAob3B0aW9ucy5jb25maWd1cmF0aW9uKSB7XG4gICAgICBhcmdzLnB1c2goYC0tY29uZmlndXJhdGlvbj0ke29wdGlvbnMuY29uZmlndXJhdGlvbn1gKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucnVubmVyKSB7XG4gICAgICBhcmdzLnB1c2goYC0tcnVubmVyPSR7b3B0aW9ucy5ydW5uZXJ9YCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnBhcmFsbGVsKSB7XG4gICAgICBhcmdzLnB1c2goYC0tcGFyYWxsZWw9JHtvcHRpb25zLnBhcmFsbGVsfWApO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5za2lwQ2FjaGUpIHtcbiAgICAgIGFyZ3MucHVzaChcIi0tc2tpcC1ueC1jYWNoZVwiKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaWdub3JlQ3ljbGVzKSB7XG4gICAgICBhcmdzLnB1c2goXCItLW54LWlnbm9yZS1jeWNsZXNcIik7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLm5vQmFpbCAhPT0gdHJ1ZSkge1xuICAgICAgYXJncy5wdXNoKFwiLS1ueC1iYWlsXCIpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5wcm9qZWN0cyAmJiBvcHRpb25zLnByb2plY3RzLmxlbmd0aCkge1xuICAgICAgYXJncy5wdXNoKGAtLXByb2plY3RzPSR7b3B0aW9ucy5wcm9qZWN0cy5qb2luKFwiLFwiKX1gKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZXhjbHVkZSkge1xuICAgICAgYXJncy5wdXNoKGAtLWV4Y2x1ZGU9JHtvcHRpb25zLmV4Y2x1ZGV9YCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIHtcbiAgICAgIGFyZ3MucHVzaChcIi0tdmVyYm9zZVwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVpbGRFeGVjdXRhYmxlQ29tbWFuZChcbiAgICAgIHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlcixcbiAgICAgIFwibnhcIixcbiAgICAgIFwicnVuLW1hbnlcIixcbiAgICAgIGAtLXRhcmdldD0ke29wdGlvbnMudGFyZ2V0fWAsXG4gICAgICBgLS1vdXRwdXQtc3R5bGU9JHtvcHRpb25zLm91dHB1dFN0eWxlIHx8IFwic3RyZWFtXCJ9YCxcbiAgICAgIC4uLmFyZ3NcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlcyBcImJ1aWxkXCIgcmVsYXRlZCBwcm9qZWN0IHRhc2tzIChidWlsZCwgY29tcGlsZSwgdGVzdCwgZXRjLikgd2l0aCBgbnB4IG54IHJ1bi1tYW55YCBmb3JtYXQuXG4gICAqIEBwYXJhbSB0YXNrIC0gVGhlIHRhc2sgb3IgdGFzayBuYW1lIHRvIG92ZXJyaWRlXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gTnggcnVuLW1hbnkgb3B0aW9uc1xuICAgKiBAcGFyYW0gZm9yY2UgLSBGb3JjZSB1bmxvY2tpbmcgdGFzayAoZWc6IGJ1aWxkIHRhc2sgaXMgbG9ja2VkKVxuICAgKiBAcmV0dXJucyAtIFRoZSB0YXNrIHRoYXQgd2FzIG92ZXJyaWRkZW5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcm90ZWN0ZWQgX292ZXJyaWRlTnhCdWlsZFRhc2soXG4gICAgdGFzazogVGFzayB8IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBvcHRpb25zOiBOeFJ1bk1hbnlPcHRpb25zLFxuICAgIGZvcmNlPzogYm9vbGVhblxuICApOiBUYXNrIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodHlwZW9mIHRhc2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRhc2sgPSB0aGlzLnRhc2tzLnRyeUZpbmQodGFzayk7XG4gICAgfVxuXG4gICAgaWYgKHRhc2sgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmb3JjZSkge1xuICAgICAgLy8gQHRzLWlnbm9yZSAtIHByaXZhdGUgcHJvcGVydHlcbiAgICAgIHRhc2suX2xvY2tlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRhc2sucmVzZXQodGhpcy5mb3JtYXROeFJ1bk1hbnlDb21tYW5kKG9wdGlvbnMpLCB7XG4gICAgICByZWNlaXZlQXJnczogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHRhc2suZGVzY3JpcHRpb24gKz0gXCIgZm9yIGFsbCBhZmZlY3RlZCBwcm9qZWN0c1wiO1xuXG4gICAgLy8gRml4IGZvciBodHRwczovL2dpdGh1Yi5jb20vbnJ3bC9ueC9wdWxsLzE1MDcxXG4gICAgdGFzay5lbnYoXCJOWF9OT05fTkFUSVZFX0hBU0hFUlwiLCBcInRydWVcIik7XG5cbiAgICByZXR1cm4gdGFzaztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgcHJvamVjdCB0YXNrIHRoYXQgZXhlY3V0ZXMgYG5weCBueCBydW4tbWFueSAuLi5gIHN0eWxlIGNvbW1hbmQuXG4gICAqL1xuICBwdWJsaWMgYWRkTnhSdW5NYW55VGFzayhuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IE54UnVuTWFueU9wdGlvbnMpOiBUYXNrIHtcbiAgICByZXR1cm4gdGhpcy5hZGRUYXNrKG5hbWUsIHtcbiAgICAgIHJlY2VpdmVBcmdzOiB0cnVlLFxuICAgICAgZXhlYzogdGhpcy5mb3JtYXROeFJ1bk1hbnlDb21tYW5kKG9wdGlvbnMpLFxuICAgICAgZW52OiB7XG4gICAgICAgIE5YX05PTl9OQVRJVkVfSEFTSEVSOiBcInRydWVcIixcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGltcGxpY2l0IGRlcGVuZGVuY3kgYmV0d2VlbiB0d28gUHJvamVjdCdzLiBUaGlzIGlzIHR5cGljYWxseVxuICAgKiB1c2VkIGluIHBvbHlnb3QgcmVwb3Mgd2hlcmUgYSBUeXBlc2NyaXB0IHByb2plY3Qgd2FudHMgYSBidWlsZCBkZXBlbmRlbmN5XG4gICAqIG9uIGEgUHl0aG9uIHByb2plY3QgYXMgYW4gZXhhbXBsZS5cbiAgICpcbiAgICogQHBhcmFtIGRlcGVuZGVudCBwcm9qZWN0IHlvdSB3YW50IHRvIGhhdmUgdGhlIGRlcGVuZGVuY3kuXG4gICAqIEBwYXJhbSBkZXBlbmRlZSBwcm9qZWN0IHlvdSB3aXNoIHRvIGRlcGVuZCBvbi5cbiAgICogQHRocm93cyBlcnJvciBpZiB0aGlzIGlzIGNhbGxlZCBvbiBhIGRlcGVuZGVudCB3aGljaCBkb2VzIG5vdCBoYXZlIGEgTlhQcm9qZWN0IGNvbXBvbmVudCBhdHRhY2hlZC5cbiAgICovXG4gIHB1YmxpYyBhZGRJbXBsaWNpdERlcGVuZGVuY3koZGVwZW5kZW50OiBQcm9qZWN0LCBkZXBlbmRlZTogUHJvamVjdCB8IHN0cmluZykge1xuICAgIGNvbnN0IG54UHJvamVjdCA9IE54UHJvamVjdC5vZihkZXBlbmRlbnQpO1xuXG4gICAgaWYgKCFueFByb2plY3QpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYCR7ZGVwZW5kZW50Lm5hbWV9IGRvZXMgbm90IGhhdmUgYW4gTlhQcm9qZWN0IGFzc29jaWF0ZWQuYFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbnhQcm9qZWN0LmFkZEltcGxpY2l0RGVwZW5kZW5jeShkZXBlbmRlZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBvbmUgb3IgbW9yZSBhZGRpdGlvbmFsIHBhY2thZ2UgZ2xvYnMgdG8gdGhlIHdvcmtzcGFjZS5cbiAgICogQHBhcmFtIHBhY2thZ2VHbG9icyBwYXRocyB0byB0aGUgcGFja2FnZSB0byBpbmNsdWRlIGluIHRoZSB3b3Jrc3BhY2UgKGZvciBleGFtcGxlIHBhY2thZ2VzL215LXBhY2thZ2UpXG4gICAqL1xuICBwdWJsaWMgYWRkV29ya3NwYWNlUGFja2FnZXMoLi4ucGFja2FnZUdsb2JzOiBzdHJpbmdbXSkge1xuICAgIC8vIEFueSBzdWJwcm9qZWN0cyB0aGF0IHdlcmUgYWRkZWQgc2luY2UgdGhlIGxhc3QgY2FsbCB0byB0aGlzIG1ldGhvZCBuZWVkIHRvIGJlIGFkZGVkIGZpcnN0LCBpbiBvcmRlciB0byBlbnN1cmVcbiAgICAvLyB3ZSBhZGQgdGhlIHdvcmtzcGFjZSBwYWNrYWdlcyBpbiBhIHNhbmUgb3JkZXIuXG4gICAgY29uc3QgcmVsYXRpdmVTdWJQcm9qZWN0V29ya3NwYWNlUGFja2FnZXMgPVxuICAgICAgdGhpcy5pbnN0YW50aWF0aW9uT3JkZXJTdWJQcm9qZWN0cy5tYXAoKHByb2plY3QpID0+XG4gICAgICAgIHBhdGgucmVsYXRpdmUodGhpcy5vdXRkaXIsIHByb2plY3Qub3V0ZGlyKVxuICAgICAgKTtcbiAgICBjb25zdCBleGlzdGluZ1dvcmtzcGFjZVBhY2thZ2VzID0gbmV3IFNldCh0aGlzLndvcmtzcGFjZVBhY2thZ2VzKTtcbiAgICB0aGlzLndvcmtzcGFjZVBhY2thZ2VzLnB1c2goXG4gICAgICAuLi5yZWxhdGl2ZVN1YlByb2plY3RXb3Jrc3BhY2VQYWNrYWdlcy5maWx0ZXIoXG4gICAgICAgIChwa2cpID0+ICFleGlzdGluZ1dvcmtzcGFjZVBhY2thZ2VzLmhhcyhwa2cpXG4gICAgICApXG4gICAgKTtcblxuICAgIC8vIEFkZCB0aGUgYWRkaXRpb25hbCBwYWNrYWdlcyBuZXh0XG4gICAgdGhpcy53b3Jrc3BhY2VQYWNrYWdlcy5wdXNoKC4uLnBhY2thZ2VHbG9icyk7XG4gIH1cblxuICAvLyBSZW1vdmUgdGhpcyBoYWNrIG9uY2Ugc3ViUHJvamVjdHMgaXMgbWFkZSBwdWJsaWMgaW4gUHJvamVuXG4gIHByaXZhdGUgZ2V0IGluc3RhbnRpYXRpb25PcmRlclN1YlByb2plY3RzKCk6IFByb2plY3RbXSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHN1YlByb2plY3RzOiBQcm9qZWN0W10gPSB0aGlzLnN1YnByb2plY3RzIHx8IFtdO1xuICAgIHJldHVybiBzdWJQcm9qZWN0cztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgc3ViUHJvamVjdHMoKTogUHJvamVjdFtdIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW50aWF0aW9uT3JkZXJTdWJQcm9qZWN0cy5zb3J0KChhLCBiKSA9PlxuICAgICAgYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHN5bWJvbGljIGxpbmtzIHRvIGFsbCBsb2NhbCB3b3Jrc3BhY2UgYmlucy4gVGhpcyBlbmFibGVzIHRoZSB1c2FnZSBvZiBiaW5zIHRoZSBzYW1lXG4gICAqIHdheSBhcyBjb25zdW1lcnMgb2YgdGhlIHBhY2thZ2VzIGhhdmUgd2hlbiBpbnN0YWxsaW5nIGZyb20gdGhlIHJlZ2lzdHJ5LlxuICAgKi9cbiAgcHJvdGVjdGVkIGxpbmtMb2NhbFdvcmtzcGFjZUJpbnMoKTogdm9pZCB7XG4gICAgY29uc3QgYmluczogW3N0cmluZywgc3RyaW5nXVtdID0gW107XG5cbiAgICB0aGlzLnN1YlByb2plY3RzLmZvckVhY2goKHN1YlByb2plY3QpID0+IHtcbiAgICAgIGlmIChzdWJQcm9qZWN0IGluc3RhbmNlb2YgTm9kZVByb2plY3QpIHtcbiAgICAgICAgY29uc3QgcGtnQmluczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9XG4gICAgICAgICAgc3ViUHJvamVjdC5wYWNrYWdlLm1hbmlmZXN0LmJpbigpIHx8IHt9O1xuICAgICAgICBiaW5zLnB1c2goXG4gICAgICAgICAgLi4uT2JqZWN0LmVudHJpZXMocGtnQmlucykubWFwKChbY21kLCBiaW5dKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlZEJpbiA9IHBhdGguam9pbihcbiAgICAgICAgICAgICAgXCIkUFdEXCIsXG4gICAgICAgICAgICAgIHBhdGgucmVsYXRpdmUodGhpcy5vdXRkaXIsIHN1YlByb2plY3Qub3V0ZGlyKSxcbiAgICAgICAgICAgICAgYmluXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIFtjbWQsIHJlc29sdmVkQmluXSBhcyBbc3RyaW5nLCBzdHJpbmddO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBsaW5rVGFzayA9IHRoaXMuYWRkVGFzayhcIndvcmtzcGFjZTpiaW46bGlua1wiLCB7XG4gICAgICBzdGVwczogYmlucy5tYXAoKFtjbWQsIGJpbl0pID0+ICh7XG4gICAgICAgIGV4ZWM6IGBsbiAtcyAke2Jpbn0gJCgke2JpbkNvbW1hbmQoXG4gICAgICAgICAgdGhpcy5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyXG4gICAgICAgICl9KS8ke2NtZH0gJj4vZGV2L251bGw7IGV4aXQgMDtgLFxuICAgICAgfSkpLFxuICAgIH0pO1xuXG4gICAgKHRoaXMudGFza3MudHJ5RmluZChcInByZXBhcmVcIikgfHwgdGhpcy5hZGRUYXNrKFwicHJlcGFyZVwiKSkuc3Bhd24obGlua1Rhc2spO1xuICB9XG5cbiAgcHJlU3ludGhlc2l6ZSgpOiB2b2lkIHtcbiAgICBzdXBlci5wcmVTeW50aGVzaXplKCk7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy53b3Jrc3BhY2VDb25maWc/LmxpbmtMb2NhbFdvcmtzcGFjZUJpbnMgPT09IHRydWUpIHtcbiAgICAgIHRoaXMubGlua0xvY2FsV29ya3NwYWNlQmlucygpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXIgPT09IE5vZGVQYWNrYWdlTWFuYWdlci5QTlBNKSB7XG4gICAgICAvLyBQTlBNIGhvaXN0aW5nIGhpZGVzIHRyYW5zaXRpdmUgYnVuZGxlZCBkZXBlbmRlbmNpZXMgd2hpY2ggcmVzdWx0cyBpblxuICAgICAgLy8gdHJhbnNpdGl2ZSBkZXBlbmRlbmNpZXMgYmVpbmcgcGFja2VkIGluY29ycmVjdGx5LlxuICAgICAgdGhpcy5zdWJQcm9qZWN0cy5mb3JFYWNoKChzdWJQcm9qZWN0KSA9PiB7XG4gICAgICAgIGlmIChpc05vZGVQcm9qZWN0KHN1YlByb2plY3QpICYmIGdldEJ1bmRsZWREZXBzKHN1YlByb2plY3QpLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHBrZ0ZvbGRlciA9IHBhdGgucmVsYXRpdmUodGhpcy5yb290Lm91dGRpciwgc3ViUHJvamVjdC5vdXRkaXIpO1xuICAgICAgICAgIC8vIENyZWF0ZSBhIHN5bWxpbmsgaW4gdGhlIHN1Yi1wcm9qZWN0IG5vZGVfbW9kdWxlcyBmb3IgYWxsIHRyYW5zaXRpdmUgZGVwc1xuICAgICAgICAgIC8vIGJlZm9yZSBydW5uaW5nIFwicGFja2FnZVwiIHRhc2tcbiAgICAgICAgICBzdWJQcm9qZWN0LnBhY2thZ2VUYXNrLnByZXBlbmRFeGVjKFxuICAgICAgICAgICAgYHBka0BwbnBtLWxpbmstYnVuZGxlZC10cmFuc2l0aXZlLWRlcHMgJHtwa2dGb2xkZXJ9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgc3ludGgoKSB7XG4gICAgdGhpcy52YWxpZGF0ZVN1YlByb2plY3RzKCk7XG4gICAgdGhpcy51cGRhdGVXb3Jrc3BhY2UoKTtcbiAgICB0aGlzLndpcmVQeXRob25EZXBlbmRlbmNpZXMoKTtcblxuICAgIC8vIFByZXZlbnQgc3ViIE5vZGVQcm9qZWN0IHBhY2thZ2VzIGZyb20gYHBvc3RTeW50aGVzaXNgIHdoaWNoIHdpbGwgY2F1c2UgaW5kaXZpZHVhbC9leHRyYW5lb3VzIGluc3RhbGxzLlxuICAgIC8vIFRoZSB3b3Jrc3BhY2UgcGFja2FnZSBpbnN0YWxsIHdpbGwgaGFuZGxlIGFsbCB0aGUgc3ViIE5vZGVQcm9qZWN0IHBhY2thZ2VzIGF1dG9tYXRpY2FsbHkuXG4gICAgY29uc3Qgc3ViUHJvamVjdFBhY2thZ2VzOiBOb2RlUGFja2FnZVtdID0gW107XG4gICAgdGhpcy5zdWJQcm9qZWN0cy5mb3JFYWNoKChzdWJQcm9qZWN0KSA9PiB7XG4gICAgICBpZiAoaXNOb2RlUHJvamVjdChzdWJQcm9qZWN0KSkge1xuICAgICAgICBjb25zdCBzdWJOb2RlUHJvamVjdDogTm9kZVByb2plY3QgPSBzdWJQcm9qZWN0IGFzIE5vZGVQcm9qZWN0O1xuICAgICAgICBzdWJQcm9qZWN0UGFja2FnZXMucHVzaChzdWJOb2RlUHJvamVjdC5wYWNrYWdlKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSAtIGBpbnN0YWxsRGVwZW5kZW5jaWVzYCBpcyBwcml2YXRlXG4gICAgICAgIHN1Yk5vZGVQcm9qZWN0LnBhY2thZ2UuaW5zdGFsbERlcGVuZGVuY2llcyA9ICgpID0+IHt9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3VwZXIuc3ludGgoKTtcblxuICAgIC8vIEZvcmNlIHdvcmtzcGFjZSBpbnN0YWxsIGRlcHMgaWYgYW55IG5vZGUgc3VicHJvamVjdCBwYWNrYWdlIGhhcyBjaGFuZ2VkLCB1bmxlc3MgdGhlIHdvcmtzcGFjZSBjaGFuZ2VkXG4gICAgaWYgKFxuICAgICAgLy8gQHRzLWlnbm9yZSAtIGBmaWxlYCBpcyBwcml2YXRlXG4gICAgICAodGhpcy5wYWNrYWdlLmZpbGUgYXMgSnNvbkZpbGUpLmNoYW5nZWQgIT09IHRydWUgJiZcbiAgICAgIC8vIEB0cy1pZ25vcmUgLSBgZmlsZWAgaXMgcHJpdmF0ZVxuICAgICAgc3ViUHJvamVjdFBhY2thZ2VzLmZpbmQoKHBrZykgPT4gKHBrZy5maWxlIGFzIEpzb25GaWxlKS5jaGFuZ2VkID09PSB0cnVlKVxuICAgICkge1xuICAgICAgLy8gQHRzLWlnbm9yZSAtIGBpbnN0YWxsRGVwZW5kZW5jaWVzYCBpcyBwcml2YXRlXG4gICAgICB0aGlzLnBhY2thZ2UuaW5zdGFsbERlcGVuZGVuY2llcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmVzIHN1YnByb2plY3RzIGRvbid0IGhhdmUgYSBkZWZhdWx0IHRhc2sgYW5kIHRoYXQgYWxsIHBhY2thZ2VzIHVzZSB0aGUgc2FtZSBwYWNrYWdlIG1hbmFnZXIuXG4gICAqL1xuICBwcml2YXRlIHZhbGlkYXRlU3ViUHJvamVjdHMoKSB7XG4gICAgdGhpcy5zdWJQcm9qZWN0cy5mb3JFYWNoKChzdWJQcm9qZWN0OiBhbnkpID0+IHtcbiAgICAgIC8vIERpc2FibGUgZGVmYXVsdCB0YXNrIG9uIHN1YnByb2plY3RzIGFzIHRoaXMgaXNuJ3Qgc3VwcG9ydGVkIGluIGEgbW9ub3JlcG9cbiAgICAgIHN1YlByb2plY3QuZGVmYXVsdFRhc2s/LnJlc2V0KCk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgaXNOb2RlUHJvamVjdChzdWJQcm9qZWN0KSAmJlxuICAgICAgICBzdWJQcm9qZWN0LnBhY2thZ2UucGFja2FnZU1hbmFnZXIgIT09IHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlclxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgJHtzdWJQcm9qZWN0Lm5hbWV9IHBhY2thZ2VNYW5hZ2VyIGRvZXMgbm90IG1hdGNoIHRoZSBtb25vcmVwbyBwYWNrYWdlTWFuYWdlcjogJHt0aGlzLnBhY2thZ2UucGFja2FnZU1hbmFnZXJ9LmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBzdWJtb2R1bGUgZW50cnkgdG8gdGhlIGFwcHJvcHJpYXRlIHdvcmtzcGFjZSBmaWxlLlxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVXb3Jrc3BhY2UoKSB7XG4gICAgLy8gQSBmaW5hbCBjYWxsIHRvIGFkZFdvcmtzcGFjZVBhY2thZ2VzIHdpbGwgdXBkYXRlIHRoZSBsaXN0IG9mIHdvcmtzcGFjZSBwYWNrYWdlcyB3aXRoIGFueSBzdWJwcm9qZWN0cyB0aGF0IGhhdmVcbiAgICAvLyBub3QgeWV0IGJlZW4gYWRkZWQsIGluIHRoZSBjb3JyZWN0IG9yZGVyXG4gICAgdGhpcy5hZGRXb3Jrc3BhY2VQYWNrYWdlcygpO1xuXG4gICAgbGV0IG5vSG9pc3QgPSB0aGlzLndvcmtzcGFjZUNvbmZpZz8ubm9Ib2lzdDtcbiAgICAvLyBBdXRvbWF0aWNhbGx5IGFkZCBhbGwgc3ViLXByb2plY3QgXCJidW5kbGVkRGVwZW5kZW5jaWVzXCIgdG8gd29ya3NwYWNlIFwiaG9ob2lzdFwiLCBvdGhlcndpc2UgdGhleSBhcmUgbm90IGJ1bmRsZWQgaW4gbnBtIHBhY2thZ2VcbiAgICBpZiAodGhpcy53b3Jrc3BhY2VDb25maWc/LmRpc2FibGVOb0hvaXN0QnVuZGxlZCAhPT0gdHJ1ZSkge1xuICAgICAgY29uc3Qgbm9Ib2lzdEJ1bmRsZWQgPSB0aGlzLnN1YlByb2plY3RzLmZsYXRNYXAoKHN1YikgPT4ge1xuICAgICAgICBpZiAoc3ViIGluc3RhbmNlb2YgTm9kZVByb2plY3QpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0QnVuZGxlZERlcHMoc3ViKS5mbGF0TWFwKChkZXApID0+IFtcbiAgICAgICAgICAgIGAke3N1Yi5uYW1lfS8ke2RlcC5uYW1lfWAsXG4gICAgICAgICAgICBgJHtzdWIubmFtZX0vJHtkZXAubmFtZX0vKmAsXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChub0hvaXN0QnVuZGxlZC5sZW5ndGgpIHtcbiAgICAgICAgbm9Ib2lzdCA9IFsuLi4obm9Ib2lzdCB8fCBbXSksIC4uLm5vSG9pc3RCdW5kbGVkXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgd29ya3NwYWNlcyBmb3IgZWFjaCBzdWJwcm9qZWN0XG4gICAgaWYgKHRoaXMucGFja2FnZS5wYWNrYWdlTWFuYWdlciA9PT0gTm9kZVBhY2thZ2VNYW5hZ2VyLlBOUE0pIHtcbiAgICAgIG5ldyBZYW1sRmlsZSh0aGlzLCBcInBucG0td29ya3NwYWNlLnlhbWxcIiwge1xuICAgICAgICByZWFkb25seTogdHJ1ZSxcbiAgICAgICAgb2JqOiB7XG4gICAgICAgICAgcGFja2FnZXM6IHRoaXMud29ya3NwYWNlUGFja2FnZXMsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5wYWNrYWdlLmFkZEZpZWxkKFwid29ya3NwYWNlc1wiLCB7XG4gICAgICBwYWNrYWdlczogdGhpcy53b3Jrc3BhY2VQYWNrYWdlcyxcbiAgICAgIG5vaG9pc3Q6IG5vSG9pc3QsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgaW5zdGFsbCB0YXNrIGZvciBweXRob24gcHJvamVjdHMgc28gdGhhdCB0aGV5IGFyZSBydW4gc2VyaWFsbHkgYW5kIGluIGRlcGVuZGVuY3kgb3JkZXIgc3VjaCB0aGF0IHB5dGhvblxuICAgKiBwcm9qZWN0cyB3aXRoaW4gdGhlIG1vbm9yZXBvIGNhbiBkZWNsYXJlIGRlcGVuZGVuY2llcyBvbiBvbmUgYW5vdGhlci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgd2lyZVB5dGhvbkRlcGVuZGVuY2llcygpIHtcbiAgICAvLyBGaW5kIGFueSBweXRob24gcHJvamVjdHNcbiAgICBjb25zdCBweXRob25Qcm9qZWN0cyA9IHRoaXMuc3ViUHJvamVjdHMuZmlsdGVyKFxuICAgICAgKHByb2plY3QpID0+IHByb2plY3QgaW5zdGFuY2VvZiBQeXRob25Qcm9qZWN0XG4gICAgKSBhcyBQeXRob25Qcm9qZWN0W107XG5cbiAgICBpZiAocHl0aG9uUHJvamVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBOb3RoaW5nIHRvIGRvIGZvciBubyBweXRob24gcHJvamVjdHNcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBNb3ZlIGFsbCBpbnN0YWxsIGNvbW1hbmRzIHRvIGluc3RhbGwtcHkgc28gdGhhdCB0aGV5IGFyZSBub3QgaW5zdGFsbGVkIGluIHBhcmFsbGVsIGJ5IHRoZSBtb25vcmVwbyBwYWNrYWdlIG1hbmFnZXIuXG4gICAgLy8gZWcgeWFybiBpbnN0YWxsIHdpbGwgcnVuIHRoZSBpbnN0YWxsIHRhc2sgZm9yIGFsbCBwYWNrYWdlcyBpbiBwYXJhbGxlbCB3aGljaCBjYW4gbGVhZCB0byBjb25mbGljdHMgZm9yIHB5dGhvbi5cbiAgICBweXRob25Qcm9qZWN0cy5mb3JFYWNoKChweXRob25Qcm9qZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbnN0YWxsUHlUYXNrID1cbiAgICAgICAgcHl0aG9uUHJvamVjdC50YXNrcy50cnlGaW5kKFwiaW5zdGFsbC1weVwiKSA/P1xuICAgICAgICBweXRob25Qcm9qZWN0LmFkZFRhc2soXCJpbnN0YWxsLXB5XCIpO1xuICAgICAgY29uc3QgaW5zdGFsbFRhc2sgPSBweXRob25Qcm9qZWN0LnRhc2tzLnRyeUZpbmQoXCJpbnN0YWxsXCIpO1xuXG4gICAgICAoaW5zdGFsbFRhc2s/LnN0ZXBzIHx8IFtdKS5mb3JFYWNoKChzdGVwKSA9PiB7XG4gICAgICAgIHRoaXMuY29weVN0ZXBJbnRvVGFzayhzdGVwLCBpbnN0YWxsUHlUYXNrLCBweXRob25Qcm9qZWN0KTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnN0YWxsVGFzaz8ucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhbiBpbnN0YWxsIHRhc2sgdG8gdGhlIG1vbm9yZXBvIHRvIGluY2x1ZGUgcnVubmluZyB0aGUgaW5zdGFsbC1weSBjb21tYW5kIHNlcmlhbGx5IHRvIGF2b2lkIGNvbmZsaWN0aW5nIHdyaXRlc1xuICAgIC8vIHRvIGEgc2hhcmVkIHZpcnR1YWwgZW52LiBUaGlzIGlzIGFsc28gbWFuYWdlZCBieSBueCBzbyB0aGF0IGluc3RhbGxzIG9jY3VyIGluIGRlcGVuZGVuY3kgb3JkZXIuXG4gICAgY29uc3QgbW9ub3JlcG9JbnN0YWxsVGFzayA9XG4gICAgICB0aGlzLnRhc2tzLnRyeUZpbmQoXCJpbnN0YWxsXCIpID8/IHRoaXMuYWRkVGFzayhcImluc3RhbGxcIik7XG4gICAgbW9ub3JlcG9JbnN0YWxsVGFzay5leGVjKFxuICAgICAgYCR7YnVpbGRFeGVjdXRhYmxlQ29tbWFuZChcbiAgICAgICAgdGhpcy5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyXG4gICAgICApfSBueCBydW4tbWFueSAtLXRhcmdldCBpbnN0YWxsLXB5IC0tcHJvamVjdHMgJHtweXRob25Qcm9qZWN0c1xuICAgICAgICAubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0Lm5hbWUpXG4gICAgICAgIC5qb2luKFwiLFwiKX0gLS1wYXJhbGxlbD0xYFxuICAgICk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIG54Lmpzb24gdG8gZW5zdXJlIHRoYXQgaW5zdGFsbC1weSBmb2xsb3dzIGRlcGVuZGVuY3kgb3JkZXJcbiAgICB0aGlzLm54SnNvbi5hZGRPdmVycmlkZShcInRhcmdldERlcGVuZGVuY2llcy5pbnN0YWxsLXB5XCIsIFtcbiAgICAgIHtcbiAgICAgICAgdGFyZ2V0OiBcImluc3RhbGwtcHlcIixcbiAgICAgICAgcHJvamVjdHM6IFwiZGVwZW5kZW5jaWVzXCIsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvcGllcyB0aGUgZ2l2ZW4gc3RlcCBpbnRvIHRoZSBnaXZlbiB0YXNrLiBTdGVwIGFuZCBUYXNrIG11c3QgYmUgZnJvbSB0aGUgZ2l2ZW4gUHJvamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBjb3B5U3RlcEludG9UYXNrKHN0ZXA6IFRhc2tTdGVwLCB0YXNrOiBUYXNrLCBwcm9qZWN0OiBQcm9qZWN0KSB7XG4gICAgaWYgKHN0ZXAuZXhlYykge1xuICAgICAgdGFzay5leGVjKHN0ZXAuZXhlYywgeyBuYW1lOiBzdGVwLm5hbWUsIGN3ZDogc3RlcC5jd2QgfSk7XG4gICAgfSBlbHNlIGlmIChzdGVwLnNheSkge1xuICAgICAgdGFzay5zYXkoc3RlcC5zYXksIHsgbmFtZTogc3RlcC5uYW1lLCBjd2Q6IHN0ZXAuY3dkIH0pO1xuICAgIH0gZWxzZSBpZiAoc3RlcC5zcGF3bikge1xuICAgICAgY29uc3Qgc3RlcFRvU3Bhd24gPSBwcm9qZWN0LnRhc2tzLnRyeUZpbmQoc3RlcC5zcGF3bik7XG4gICAgICBpZiAoc3RlcFRvU3Bhd24pIHtcbiAgICAgICAgdGFzay5zcGF3bihzdGVwVG9TcGF3biwgeyBuYW1lOiBzdGVwLm5hbWUsIGN3ZDogc3RlcC5jd2QgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdGVwLmJ1aWx0aW4pIHtcbiAgICAgIHRhc2suYnVpbHRpbihzdGVwLmJ1aWx0aW4pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIHBhc3NlZCBpbiBwcm9qZWN0IGlzIG9mIHR5cGUgTm9kZVByb2plY3QuXG4gKlxuICogQHBhcmFtIHByb2plY3QgUHJvamVjdCBpbnN0YW5jZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHByb2plY3QgaW5zdGFuY2UgaXMgb2YgdHlwZSBOb2RlUHJvamVjdC5cbiAqL1xuZnVuY3Rpb24gaXNOb2RlUHJvamVjdChwcm9qZWN0OiBhbnkpOiBwcm9qZWN0IGlzIE5vZGVQcm9qZWN0IHtcbiAgcmV0dXJuIHByb2plY3QgaW5zdGFuY2VvZiBOb2RlUHJvamVjdCB8fCBwcm9qZWN0LnBhY2thZ2U7XG59XG5cbi8qKlxuICogR2V0cyBidW5kbGVkIGRlcGVuZGVuY2llcyBmb3IgYSBnaXZlbiBwcm9qZWN0XG4gKi9cbmZ1bmN0aW9uIGdldEJ1bmRsZWREZXBzKHByb2plY3Q6IFByb2plY3QpOiBEZXBlbmRlbmN5W10ge1xuICByZXR1cm4gcHJvamVjdC5kZXBzLmFsbC5maWx0ZXIoKGRlcCkgPT4gZGVwLnR5cGUgPT09IERlcGVuZGVuY3lUeXBlLkJVTkRMRUQpO1xufVxuIl19
\ No newline at end of file
diff --git a/lib/nx-project.d.ts b/lib/nx-project.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e3c8be4892a6289b2e9b81ec4a5415ed2f8d26b6
--- /dev/null
+++ b/lib/nx-project.d.ts
@@ -0,0 +1,32 @@
+import { Component, Project } from "projen";
+/**
+ * Component which manged the project specific NX Config and is added to all NXMonorepo subprojects.
+ *
+ */
+export declare class NxProject extends Component {
+    /**
+     * Retrieves an instance of NXProject if one is associated to the given project.
+     *
+     * @param project project instance.
+     */
+    static of(project: Project): NxProject | undefined;
+    /**
+     * List of implicit dependencies.
+     *
+     * @internal
+     * @private
+     */
+    private readonly _implicitDependencies;
+    constructor(project: Project);
+    /**
+     * Adds an implicit dependency between the dependant (this project) and dependee.
+     *
+     * @param dependee project to add the implicit dependency on.
+     */
+    addImplicitDependency(dependee: Project | string): void;
+    /**
+     * Generate a nx block in the package.json if this is a NodeProject. Otherwise generate a project.json with
+     * the relevant NX configuration.
+     */
+    synthesize(): void;
+}
diff --git a/lib/nx-project.js b/lib/nx-project.js
new file mode 100644
index 0000000000000000000000000000000000000000..bc17a91de416195ec141ac181b29f32f58e02a13
--- /dev/null
+++ b/lib/nx-project.js
@@ -0,0 +1,79 @@
+"use strict";
+Object.defineProperty(exports, "__esModule", { value: true });
+exports.NxProject = void 0;
+/*! Copyright [Amazon.com](http://amazon.com/), Inc. or its affiliates. All Rights Reserved.
+SPDX-License-Identifier: Apache-2.0 */
+const path = require("path");
+const projen_1 = require("projen");
+const javascript_1 = require("projen/lib/javascript");
+const nx_monorepo_1 = require("./nx-monorepo");
+/**
+ * Component which manged the project specific NX Config and is added to all NXMonorepo subprojects.
+ *
+ */
+class NxProject extends projen_1.Component {
+    constructor(project) {
+        super(project);
+        /**
+         * List of implicit dependencies.
+         *
+         * @internal
+         * @private
+         */
+        this._implicitDependencies = [];
+    }
+    /**
+     * Retrieves an instance of NXProject if one is associated to the given project.
+     *
+     * @param project project instance.
+     */
+    static of(project) {
+        return project.components.find((c) => c instanceof NxProject);
+    }
+    /**
+     * Adds an implicit dependency between the dependant (this project) and dependee.
+     *
+     * @param dependee project to add the implicit dependency on.
+     */
+    addImplicitDependency(dependee) {
+        this._implicitDependencies.push(dependee instanceof projen_1.Project ? dependee.name : dependee);
+    }
+    /**
+     * Generate a nx block in the package.json if this is a NodeProject. Otherwise generate a project.json with
+     * the relevant NX configuration.
+     */
+    synthesize() {
+        if (this.project instanceof javascript_1.NodeProject) {
+            this._implicitDependencies.length > 0 &&
+                this.project
+                    .tryFindObjectFile("package.json")
+                    ?.addOverride("nx.implicitDependencies", this._implicitDependencies);
+        }
+        else {
+            const projectJson = this.project.tryFindObjectFile("project.json") ||
+                new projen_1.JsonFile(this.project, "project.json", {
+                    readonly: true,
+                    marker: true,
+                    obj: {},
+                });
+            const projectPath = path.relative(this.project.root.outdir, this.project.outdir);
+            projectJson.addOverride("name", this.project.name);
+            projectJson.addOverride("root", projectPath);
+            this._implicitDependencies.length > 0 &&
+                projectJson.addOverride("implicitDependencies", this._implicitDependencies);
+            projectJson.addOverride("targets", this.project.tasks.all.reduce((p, c) => ({
+                [c.name]: {
+                    executor: "nx:run-commands",
+                    options: {
+                        command: `${nx_monorepo_1.buildExecutableCommand(this.project.root.package.packageManager, `projen ${c.name}`)}`,
+                        cwd: projectPath,
+                    },
+                },
+                ...p,
+            }), {}));
+        }
+        super.synthesize();
+    }
+}
+exports.NxProject = NxProject;
+//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibngtcHJvamVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9ueC1wcm9qZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBO3NDQUNzQztBQUN0Qyw2QkFBNkI7QUFDN0IsbUNBQXNEO0FBQ3RELHNEQUFvRDtBQUNwRCwrQ0FBdUQ7QUFFdkQ7OztHQUdHO0FBQ0gsTUFBYSxTQUFVLFNBQVEsa0JBQVM7SUFvQnRDLFlBQVksT0FBZ0I7UUFDMUIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBVGpCOzs7OztXQUtHO1FBQ2MsMEJBQXFCLEdBQWEsRUFBRSxDQUFDO0lBSXRELENBQUM7SUFyQkQ7Ozs7T0FJRztJQUNILE1BQU0sQ0FBQyxFQUFFLENBQUMsT0FBZ0I7UUFDeEIsT0FBTyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxZQUFZLFNBQVMsQ0FFL0MsQ0FBQztJQUNoQixDQUFDO0lBY0Q7Ozs7T0FJRztJQUNJLHFCQUFxQixDQUFDLFFBQTBCO1FBQ3JELElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQzdCLFFBQVEsWUFBWSxnQkFBTyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQ3ZELENBQUM7SUFDSixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsVUFBVTtRQUNSLElBQUksSUFBSSxDQUFDLE9BQU8sWUFBWSx3QkFBVyxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQztnQkFDbkMsSUFBSSxDQUFDLE9BQU87cUJBQ1QsaUJBQWlCLENBQUMsY0FBYyxDQUFDO29CQUNsQyxFQUFFLFdBQVcsQ0FBQyx5QkFBeUIsRUFBRSxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztTQUMxRTthQUFNO1lBQ0wsTUFBTSxXQUFXLEdBQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLENBQUM7Z0JBQzlDLElBQUksaUJBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGNBQWMsRUFBRTtvQkFDekMsUUFBUSxFQUFFLElBQUk7b0JBQ2QsTUFBTSxFQUFFLElBQUk7b0JBQ1osR0FBRyxFQUFFLEVBQUU7aUJBQ1IsQ0FBQyxDQUFDO1lBRUwsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUN4QixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FDcEIsQ0FBQztZQUNGLFdBQVcsQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkQsV0FBVyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUM7WUFDN0MsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUNuQyxXQUFXLENBQUMsV0FBVyxDQUNyQixzQkFBc0IsRUFDdEIsSUFBSSxDQUFDLHFCQUFxQixDQUMzQixDQUFDO1lBQ0osV0FBVyxDQUFDLFdBQVcsQ0FDckIsU0FBUyxFQUNULElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQzNCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDVCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDUixRQUFRLEVBQUUsaUJBQWlCO29CQUMzQixPQUFPLEVBQUU7d0JBQ1AsT0FBTyxFQUFFLEdBQUcsb0NBQXNCLENBQy9CLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBb0IsQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUN6RCxVQUFVLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FDbkIsRUFBRTt3QkFDSCxHQUFHLEVBQUUsV0FBVztxQkFDakI7aUJBQ0Y7Z0JBQ0QsR0FBRyxDQUFDO2FBQ0wsQ0FBQyxFQUNGLEVBQUUsQ0FDSCxDQUNGLENBQUM7U0FDSDtRQUNELEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNyQixDQUFDO0NBQ0Y7QUF2RkQsOEJBdUZDIiwic291cmNlc0NvbnRlbnQiOlsiLyohIENvcHlyaWdodCBbQW1hem9uLmNvbV0oaHR0cDovL2FtYXpvbi5jb20vKSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wICovXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIEpzb25GaWxlLCBQcm9qZWN0IH0gZnJvbSBcInByb2plblwiO1xuaW1wb3J0IHsgTm9kZVByb2plY3QgfSBmcm9tIFwicHJvamVuL2xpYi9qYXZhc2NyaXB0XCI7XG5pbXBvcnQgeyBidWlsZEV4ZWN1dGFibGVDb21tYW5kIH0gZnJvbSBcIi4vbngtbW9ub3JlcG9cIjtcblxuLyoqXG4gKiBDb21wb25lbnQgd2hpY2ggbWFuZ2VkIHRoZSBwcm9qZWN0IHNwZWNpZmljIE5YIENvbmZpZyBhbmQgaXMgYWRkZWQgdG8gYWxsIE5YTW9ub3JlcG8gc3VicHJvamVjdHMuXG4gKlxuICovXG5leHBvcnQgY2xhc3MgTnhQcm9qZWN0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbiBpbnN0YW5jZSBvZiBOWFByb2plY3QgaWYgb25lIGlzIGFzc29jaWF0ZWQgdG8gdGhlIGdpdmVuIHByb2plY3QuXG4gICAqXG4gICAqIEBwYXJhbSBwcm9qZWN0IHByb2plY3QgaW5zdGFuY2UuXG4gICAqL1xuICBzdGF0aWMgb2YocHJvamVjdDogUHJvamVjdCk6IE54UHJvamVjdCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHByb2plY3QuY29tcG9uZW50cy5maW5kKChjKSA9PiBjIGluc3RhbmNlb2YgTnhQcm9qZWN0KSBhc1xuICAgICAgfCBOeFByb2plY3RcbiAgICAgIHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgaW1wbGljaXQgZGVwZW5kZW5jaWVzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgX2ltcGxpY2l0RGVwZW5kZW5jaWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByb2plY3Q6IFByb2plY3QpIHtcbiAgICBzdXBlcihwcm9qZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGltcGxpY2l0IGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZGVwZW5kYW50ICh0aGlzIHByb2plY3QpIGFuZCBkZXBlbmRlZS5cbiAgICpcbiAgICogQHBhcmFtIGRlcGVuZGVlIHByb2plY3QgdG8gYWRkIHRoZSBpbXBsaWNpdCBkZXBlbmRlbmN5IG9uLlxuICAgKi9cbiAgcHVibGljIGFkZEltcGxpY2l0RGVwZW5kZW5jeShkZXBlbmRlZTogUHJvamVjdCB8IHN0cmluZykge1xuICAgIHRoaXMuX2ltcGxpY2l0RGVwZW5kZW5jaWVzLnB1c2goXG4gICAgICBkZXBlbmRlZSBpbnN0YW5jZW9mIFByb2plY3QgPyBkZXBlbmRlZS5uYW1lIDogZGVwZW5kZWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgbnggYmxvY2sgaW4gdGhlIHBhY2thZ2UuanNvbiBpZiB0aGlzIGlzIGEgTm9kZVByb2plY3QuIE90aGVyd2lzZSBnZW5lcmF0ZSBhIHByb2plY3QuanNvbiB3aXRoXG4gICAqIHRoZSByZWxldmFudCBOWCBjb25maWd1cmF0aW9uLlxuICAgKi9cbiAgc3ludGhlc2l6ZSgpIHtcbiAgICBpZiAodGhpcy5wcm9qZWN0IGluc3RhbmNlb2YgTm9kZVByb2plY3QpIHtcbiAgICAgIHRoaXMuX2ltcGxpY2l0RGVwZW5kZW5jaWVzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgdGhpcy5wcm9qZWN0XG4gICAgICAgICAgLnRyeUZpbmRPYmplY3RGaWxlKFwicGFja2FnZS5qc29uXCIpXG4gICAgICAgICAgPy5hZGRPdmVycmlkZShcIm54LmltcGxpY2l0RGVwZW5kZW5jaWVzXCIsIHRoaXMuX2ltcGxpY2l0RGVwZW5kZW5jaWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvamVjdEpzb24gPVxuICAgICAgICB0aGlzLnByb2plY3QudHJ5RmluZE9iamVjdEZpbGUoXCJwcm9qZWN0Lmpzb25cIikgfHxcbiAgICAgICAgbmV3IEpzb25GaWxlKHRoaXMucHJvamVjdCwgXCJwcm9qZWN0Lmpzb25cIiwge1xuICAgICAgICAgIHJlYWRvbmx5OiB0cnVlLFxuICAgICAgICAgIG1hcmtlcjogdHJ1ZSxcbiAgICAgICAgICBvYmo6IHt9LFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgcHJvamVjdFBhdGggPSBwYXRoLnJlbGF0aXZlKFxuICAgICAgICB0aGlzLnByb2plY3Qucm9vdC5vdXRkaXIsXG4gICAgICAgIHRoaXMucHJvamVjdC5vdXRkaXJcbiAgICAgICk7XG4gICAgICBwcm9qZWN0SnNvbi5hZGRPdmVycmlkZShcIm5hbWVcIiwgdGhpcy5wcm9qZWN0Lm5hbWUpO1xuICAgICAgcHJvamVjdEpzb24uYWRkT3ZlcnJpZGUoXCJyb290XCIsIHByb2plY3RQYXRoKTtcbiAgICAgIHRoaXMuX2ltcGxpY2l0RGVwZW5kZW5jaWVzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgcHJvamVjdEpzb24uYWRkT3ZlcnJpZGUoXG4gICAgICAgICAgXCJpbXBsaWNpdERlcGVuZGVuY2llc1wiLFxuICAgICAgICAgIHRoaXMuX2ltcGxpY2l0RGVwZW5kZW5jaWVzXG4gICAgICAgICk7XG4gICAgICBwcm9qZWN0SnNvbi5hZGRPdmVycmlkZShcbiAgICAgICAgXCJ0YXJnZXRzXCIsXG4gICAgICAgIHRoaXMucHJvamVjdC50YXNrcy5hbGwucmVkdWNlKFxuICAgICAgICAgIChwLCBjKSA9PiAoe1xuICAgICAgICAgICAgW2MubmFtZV06IHtcbiAgICAgICAgICAgICAgZXhlY3V0b3I6IFwibng6cnVuLWNvbW1hbmRzXCIsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBgJHtidWlsZEV4ZWN1dGFibGVDb21tYW5kKFxuICAgICAgICAgICAgICAgICAgKHRoaXMucHJvamVjdC5yb290IGFzIE5vZGVQcm9qZWN0KS5wYWNrYWdlLnBhY2thZ2VNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgYHByb2plbiAke2MubmFtZX1gXG4gICAgICAgICAgICAgICAgKX1gLFxuICAgICAgICAgICAgICAgIGN3ZDogcHJvamVjdFBhdGgsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4ucCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB7fVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgICBzdXBlci5zeW50aGVzaXplKCk7XG4gIH1cbn1cbiJdfQ==
\ No newline at end of file
diff --git a/lib/nx-types.d.ts b/lib/nx-types.d.ts
index 98ff3b73a06cd65f4861ff2c580a643c61a312f9..531ea07db6fef10d9f6fcf34ee72f2eca6c84c7e 100644
--- a/lib/nx-types.d.ts
+++ b/lib/nx-types.d.ts
@@ -34,12 +34,6 @@ export declare namespace Nx {
          */
         readonly dependsOn?: TargetDependency[];
     }
-    /**
-     * Implicit Dependencies map.
-     */
-    type ImplicitDependencies = {
-        [pkg: string]: string[];
-    };
     /**
      * Supported enums for a TargetDependency.
      */
@@ -98,12 +92,6 @@ export declare namespace Nx {
          * @default mainline
          */
         readonly affectedBranch?: string;
-        /**
-         * Configuration for Implicit Dependencies.
-         *
-         * @see https://nx.dev/configuration/packagejson#implicitdependencies
-         */
-        readonly implicitDependencies?: ImplicitDependencies;
         /**
          * Configuration for TargetDependencies.
          *
diff --git a/lib/nx-types.js b/lib/nx-types.js
index a01221db1bcbbfc5daf50455c92673e62e7be916..7e3c7d74ac4bdc013937a34dbc916409de0b319d 100644
--- a/lib/nx-types.js
+++ b/lib/nx-types.js
@@ -26,4 +26,4 @@ var Nx;
         TargetDependencyProject["DEPENDENCIES"] = "dependencies";
     })(TargetDependencyProject = Nx.TargetDependencyProject || (Nx.TargetDependencyProject = {}));
 })(Nx = exports.Nx || (exports.Nx = {}));
-//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibngtdHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbngtdHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7c0NBQ3NDO0FBQ3RDLElBQWlCLEVBQUUsQ0F1TGxCO0FBdkxELFdBQWlCLEVBQUU7SUF1Q2pCOztPQUVHO0lBQ0gsSUFBWSx1QkFlWDtJQWZELFdBQVksdUJBQXVCO1FBQ2pDOzs7OztXQUtHO1FBQ0gsd0NBQWEsQ0FBQTtRQUNiOzs7OztXQUtHO1FBQ0gsd0RBQTZCLENBQUE7SUFDL0IsQ0FBQyxFQWZXLHVCQUF1QixHQUF2QiwwQkFBdUIsS0FBdkIsMEJBQXVCLFFBZWxDO0FBOEhILENBQUMsRUF2TGdCLEVBQUUsR0FBRixVQUFFLEtBQUYsVUFBRSxRQXVMbEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQ29weXJpZ2h0IFtBbWF6b24uY29tXShodHRwOi8vYW1hem9uLmNvbS8pLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjAgKi9cbmV4cG9ydCBuYW1lc3BhY2UgTngge1xuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgbnggdGFyZ2V0RGVwZW5kZW5jaWVzLlxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVGFyZ2V0RGVwZW5kZW5jaWVzID0geyBbdGFyZ2V0OiBzdHJpbmddOiBUYXJnZXREZXBlbmRlbmN5W10gfTtcblxuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgcHJvamVjdCBzcGVjaWZpYyB0YXJnZXRzLlxuICAgKi9cbiAgZXhwb3J0IHR5cGUgUHJvamVjdFRhcmdldHMgPSB7IFt0YXJnZXQ6IHN0cmluZ106IFByb2plY3RUYXJnZXQgfTtcblxuICAvKipcbiAgICogUHJvamVjdCBUYXJnZXQuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIFByb2plY3RUYXJnZXQge1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgaW5wdXRzIHRvIGhhc2ggZm9yIGNhY2hlIGtleSwgcmVsYXRpdmUgdG8gdGhlIHJvb3Qgb2YgdGhlIG1vbm9yZXBvLlxuICAgICAqXG4gICAgICogbm90ZTogbXVzdCBzdGFydCB3aXRoIGxlYWRpbmcgL1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGlucHV0cz86IHN0cmluZ1tdO1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2Ygb3V0cHV0cyB0byBjYWNoZSwgcmVsYXRpdmUgdG8gdGhlIHJvb3Qgb2YgdGhlIG1vbm9yZXBvLlxuICAgICAqXG4gICAgICogbm90ZTogbXVzdCBzdGFydCB3aXRoIGxlYWRpbmcgL1xuICAgICAqL1xuICAgIHJlYWRvbmx5IG91dHB1dHM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgVGFyZ2V0IERlcGVuZGVuY2llcy5cbiAgICAgKi9cbiAgICByZWFkb25seSBkZXBlbmRzT24/OiBUYXJnZXREZXBlbmRlbmN5W107XG4gIH1cblxuICAvKipcbiAgICogSW1wbGljaXQgRGVwZW5kZW5jaWVzIG1hcC5cbiAgICovXG4gIGV4cG9ydCB0eXBlIEltcGxpY2l0RGVwZW5kZW5jaWVzID0geyBbcGtnOiBzdHJpbmddOiBzdHJpbmdbXSB9O1xuXG4gIC8qKlxuICAgKiBTdXBwb3J0ZWQgZW51bXMgZm9yIGEgVGFyZ2V0RGVwZW5kZW5jeS5cbiAgICovXG4gIGV4cG9ydCBlbnVtIFRhcmdldERlcGVuZGVuY3lQcm9qZWN0IHtcbiAgICAvKipcbiAgICAgKiBPbmx5IHJlbHkgb24gdGhlIHBhY2thZ2Ugd2hlcmUgdGhlIHRhcmdldCBpcyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzdWFsbHkgZG9uZSBmb3IgdGVzdCBsaWtlIHRhcmdldHMgd2hlcmUgeW91IG9ubHkgd2FudCB0byBydW4gdW5pdFxuICAgICAqIHRlc3RzIG9uIHRoZSB0YXJnZXQgcGFja2FnZXMgd2l0aG91dCB0ZXN0aW5nIGFsbCBkZXBlbmRlbnQgcGFja2FnZXMuXG4gICAgICovXG4gICAgU0VMRiA9IFwic2VsZlwiLFxuICAgIC8qKlxuICAgICAqIFRhcmdldCByZWxpZXMgb24gZXhlY3V0aW5nIHRoZSB0YXJnZXQgYWdhaW5zdCBhbGwgZGVwZW5kZW5jaWVzIGZpcnN0LlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c3VhbGx5IGRvbmUgZm9yIGJ1aWxkIGxpa2UgdGFyZ2V0cyB3aGVyZSB5b3Ugd2FudCB0byBidWlsZCBhbGxcbiAgICAgKiBkZXBlbmRhbnQgcHJvamVjdHMgZmlyc3QuXG4gICAgICovXG4gICAgREVQRU5ERU5DSUVTID0gXCJkZXBlbmRlbmNpZXNcIixcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIGFuIE5YIFRhcmdldCBEZXBlbmRlbmN5LlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBUYXJnZXREZXBlbmRlbmN5IHtcbiAgICAvKipcbiAgICAgKiBQcm9qZW4gdGFyZ2V0IGkuZTogYnVpbGQsIHRlc3QsIGV0Y1xuICAgICAqL1xuICAgIHJlYWRvbmx5IHRhcmdldDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGFyZ2V0IGRlcGVuZGVuY2llcy5cbiAgICAgKi9cbiAgICByZWFkb25seSBwcm9qZWN0czogVGFyZ2V0RGVwZW5kZW5jeVByb2plY3Q7XG4gIH1cblxuICAvKipcbiAgICogTmFtZWQgaW5wdXRzIGNvbmZpZ1xuICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L3JlZmVyZW5jZS9ueC1qc29uI2lucHV0cy0mLW5hbWVkaW5wdXRzXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIE5hbWVkSW5wdXRzIHtcbiAgICByZWFkb25seSBbbmFtZTogc3RyaW5nXTogc3RyaW5nW107XG4gIH1cblxuICAvKipcbiAgICogVGFyZ2V0IGRlZmF1bHRzIGNvbmZpZ1xuICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L3JlZmVyZW5jZS9ueC1qc29uI3RhcmdldC1kZWZhdWx0c1xuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBUYXJnZXREZWZhdWx0cyB7XG4gICAgcmVhZG9ubHkgW25hbWU6IHN0cmluZ106IFByb2plY3RUYXJnZXQ7XG4gIH1cblxuICAvKipcbiAgICogTlggd29ya3NwYWNlIGNvbmZpZ3VyYXRpb25zLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L2NvbmZpZ3VyYXRpb24vcGFja2FnZWpzb25cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgV29ya3NwYWNlQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBBZmZlY3RlZCBicmFuY2guXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBtYWlubGluZVxuICAgICAqL1xuICAgIHJlYWRvbmx5IGFmZmVjdGVkQnJhbmNoPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gZm9yIEltcGxpY2l0IERlcGVuZGVuY2llcy5cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvY29uZmlndXJhdGlvbi9wYWNrYWdlanNvbiNpbXBsaWNpdGRlcGVuZGVuY2llc1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGltcGxpY2l0RGVwZW5kZW5jaWVzPzogSW1wbGljaXREZXBlbmRlbmNpZXM7XG5cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmF0aW9uIGZvciBUYXJnZXREZXBlbmRlbmNpZXMuXG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L2NvbmZpZ3VyYXRpb24vcGFja2FnZWpzb24jdGFyZ2V0LWRlcGVuZGVuY2llc1xuICAgICAqL1xuICAgIHJlYWRvbmx5IHRhcmdldERlcGVuZGVuY2llcz86IFRhcmdldERlcGVuZGVuY2llcztcblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgcGF0dGVybnMgdG8gaW5jbHVkZSBpbiB0aGUgLm54aWdub3JlIGZpbGUuXG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L2NvbmZpZ3VyYXRpb24vcGFja2FnZWpzb24jbnhpZ25vcmVcbiAgICAgKi9cbiAgICByZWFkb25seSBueElnbm9yZT86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogUmVhZCBvbmx5IGFjY2VzcyB0b2tlbiBpZiBlbmFibGluZyBueCBjbG91ZC5cbiAgICAgKi9cbiAgICByZWFkb25seSBueENsb3VkUmVhZE9ubHlBY2Nlc3NUb2tlbj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIERlZmluZXMgdGhlIGxpc3Qgb2YgdGFyZ2V0cy9vcGVyYXRpb25zIHRoYXQgYXJlIGNhY2hlZCBieSBOeFxuICAgICAqXG4gICAgICogQGRlZmF1bHQgW1wiYnVpbGRcIiwgXCJ0ZXN0XCJdXG4gICAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvbngtanNvbiN0YXNrcy1ydW5uZXItb3B0aW9uc1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGNhY2hlYWJsZU9wZXJhdGlvbnM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIE5hbWVkIGlucHV0c1xuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvcmVmZXJlbmNlL254LWpzb24jaW5wdXRzLSYtbmFtZWRpbnB1dHNcbiAgICAgKi9cbiAgICByZWFkb25seSBuYW1lZElucHV0cz86IE5hbWVkSW5wdXRzO1xuXG4gICAgLyoqXG4gICAgICogVGFyZ2V0IGRlZmF1bHRzXG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L3JlZmVyZW5jZS9ueC1qc29uI3RhcmdldC1kZWZhdWx0c1xuICAgICAqL1xuICAgIHJlYWRvbmx5IHRhcmdldERlZmF1bHRzPzogVGFyZ2V0RGVmYXVsdHM7XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIFByb2plY3RDb25maWcge1xuICAgIC8qKlxuICAgICAqIE5hbWVkIGlucHV0c1xuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvcmVmZXJlbmNlL254LWpzb24jaW5wdXRzLSYtbmFtZWRpbnB1dHNcbiAgICAgKi9cbiAgICByZWFkb25seSBuYW1lZElucHV0cz86IE5hbWVkSW5wdXRzO1xuXG4gICAgLyoqXG4gICAgICogVGFyZ2V0cyBjb25maWd1cmF0aW9uXG4gICAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvcHJvamVjdC1jb25maWd1cmF0aW9uXG4gICAgICovXG4gICAgcmVhZG9ubHkgdGFyZ2V0cz86IFByb2plY3RUYXJnZXRzO1xuXG4gICAgLyoqXG4gICAgICogUHJvamVjdCB0YWcgYW5ub3RhdGlvbnNcbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvcmVmZXJlbmNlL3Byb2plY3QtY29uZmlndXJhdGlvbiN0YWdzXG4gICAgICovXG4gICAgcmVhZG9ubHkgdGFncz86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogSW1wbGljaXQgZGVwZW5kZW5jaWVzXG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L3JlZmVyZW5jZS9wcm9qZWN0LWNvbmZpZ3VyYXRpb24jaW1wbGljaXRkZXBlbmRlbmNpZXNcbiAgICAgKi9cbiAgICByZWFkb25seSBpbXBsaWNpdERlcGVuZGVuY2llcz86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogRXhwbGljaXQgbGlzdCBvZiBzY3JpcHRzIGZvciBOeCB0byBpbmNsdWRlLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvcmVmZXJlbmNlL3Byb2plY3QtY29uZmlndXJhdGlvbiNpZ25vcmluZy1wYWNrYWdlLmpzb24tc2NyaXB0c1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGluY2x1ZGVkU2NyaXB0cz86IHN0cmluZ1tdO1xuICB9XG59XG4iXX0=
\ No newline at end of file
+//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibngtdHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbngtdHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7c0NBQ3NDO0FBQ3RDLElBQWlCLEVBQUUsQ0E0S2xCO0FBNUtELFdBQWlCLEVBQUU7SUFrQ2pCOztPQUVHO0lBQ0gsSUFBWSx1QkFlWDtJQWZELFdBQVksdUJBQXVCO1FBQ2pDOzs7OztXQUtHO1FBQ0gsd0NBQWEsQ0FBQTtRQUNiOzs7OztXQUtHO1FBQ0gsd0RBQTZCLENBQUE7SUFDL0IsQ0FBQyxFQWZXLHVCQUF1QixHQUF2QiwwQkFBdUIsS0FBdkIsMEJBQXVCLFFBZWxDO0FBd0hILENBQUMsRUE1S2dCLEVBQUUsR0FBRixVQUFFLEtBQUYsVUFBRSxRQTRLbEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQ29weXJpZ2h0IFtBbWF6b24uY29tXShodHRwOi8vYW1hem9uLmNvbS8pLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjAgKi9cbmV4cG9ydCBuYW1lc3BhY2UgTngge1xuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgbnggdGFyZ2V0RGVwZW5kZW5jaWVzLlxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVGFyZ2V0RGVwZW5kZW5jaWVzID0geyBbdGFyZ2V0OiBzdHJpbmddOiBUYXJnZXREZXBlbmRlbmN5W10gfTtcblxuICAvKipcbiAgICogQ29uZmlndXJhdGlvbiBmb3IgcHJvamVjdCBzcGVjaWZpYyB0YXJnZXRzLlxuICAgKi9cbiAgZXhwb3J0IHR5cGUgUHJvamVjdFRhcmdldHMgPSB7IFt0YXJnZXQ6IHN0cmluZ106IFByb2plY3RUYXJnZXQgfTtcblxuICAvKipcbiAgICogUHJvamVjdCBUYXJnZXQuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIFByb2plY3RUYXJnZXQge1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgaW5wdXRzIHRvIGhhc2ggZm9yIGNhY2hlIGtleSwgcmVsYXRpdmUgdG8gdGhlIHJvb3Qgb2YgdGhlIG1vbm9yZXBvLlxuICAgICAqXG4gICAgICogbm90ZTogbXVzdCBzdGFydCB3aXRoIGxlYWRpbmcgL1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGlucHV0cz86IHN0cmluZ1tdO1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2Ygb3V0cHV0cyB0byBjYWNoZSwgcmVsYXRpdmUgdG8gdGhlIHJvb3Qgb2YgdGhlIG1vbm9yZXBvLlxuICAgICAqXG4gICAgICogbm90ZTogbXVzdCBzdGFydCB3aXRoIGxlYWRpbmcgL1xuICAgICAqL1xuICAgIHJlYWRvbmx5IG91dHB1dHM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgVGFyZ2V0IERlcGVuZGVuY2llcy5cbiAgICAgKi9cbiAgICByZWFkb25seSBkZXBlbmRzT24/OiBUYXJnZXREZXBlbmRlbmN5W107XG4gIH1cblxuICAvKipcbiAgICogU3VwcG9ydGVkIGVudW1zIGZvciBhIFRhcmdldERlcGVuZGVuY3kuXG4gICAqL1xuICBleHBvcnQgZW51bSBUYXJnZXREZXBlbmRlbmN5UHJvamVjdCB7XG4gICAgLyoqXG4gICAgICogT25seSByZWx5IG9uIHRoZSBwYWNrYWdlIHdoZXJlIHRoZSB0YXJnZXQgaXMgY2FsbGVkLlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c3VhbGx5IGRvbmUgZm9yIHRlc3QgbGlrZSB0YXJnZXRzIHdoZXJlIHlvdSBvbmx5IHdhbnQgdG8gcnVuIHVuaXRcbiAgICAgKiB0ZXN0cyBvbiB0aGUgdGFyZ2V0IHBhY2thZ2VzIHdpdGhvdXQgdGVzdGluZyBhbGwgZGVwZW5kZW50IHBhY2thZ2VzLlxuICAgICAqL1xuICAgIFNFTEYgPSBcInNlbGZcIixcbiAgICAvKipcbiAgICAgKiBUYXJnZXQgcmVsaWVzIG9uIGV4ZWN1dGluZyB0aGUgdGFyZ2V0IGFnYWluc3QgYWxsIGRlcGVuZGVuY2llcyBmaXJzdC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXN1YWxseSBkb25lIGZvciBidWlsZCBsaWtlIHRhcmdldHMgd2hlcmUgeW91IHdhbnQgdG8gYnVpbGQgYWxsXG4gICAgICogZGVwZW5kYW50IHByb2plY3RzIGZpcnN0LlxuICAgICAqL1xuICAgIERFUEVOREVOQ0lFUyA9IFwiZGVwZW5kZW5jaWVzXCIsXG4gIH1cblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhbiBOWCBUYXJnZXQgRGVwZW5kZW5jeS5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0RGVwZW5kZW5jeSB7XG4gICAgLyoqXG4gICAgICogUHJvamVuIHRhcmdldCBpLmU6IGJ1aWxkLCB0ZXN0LCBldGNcbiAgICAgKi9cbiAgICByZWFkb25seSB0YXJnZXQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRhcmdldCBkZXBlbmRlbmNpZXMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcHJvamVjdHM6IFRhcmdldERlcGVuZGVuY3lQcm9qZWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIE5hbWVkIGlucHV0cyBjb25maWdcbiAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvbngtanNvbiNpbnB1dHMtJi1uYW1lZGlucHV0c1xuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBOYW1lZElucHV0cyB7XG4gICAgcmVhZG9ubHkgW25hbWU6IHN0cmluZ106IHN0cmluZ1tdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRhcmdldCBkZWZhdWx0cyBjb25maWdcbiAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvbngtanNvbiN0YXJnZXQtZGVmYXVsdHNcbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0RGVmYXVsdHMge1xuICAgIHJlYWRvbmx5IFtuYW1lOiBzdHJpbmddOiBQcm9qZWN0VGFyZ2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIE5YIHdvcmtzcGFjZSBjb25maWd1cmF0aW9ucy5cbiAgICpcbiAgICogQHNlZSBodHRwczovL254LmRldi9jb25maWd1cmF0aW9uL3BhY2thZ2Vqc29uXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIFdvcmtzcGFjZUNvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQWZmZWN0ZWQgYnJhbmNoLlxuICAgICAqXG4gICAgICogQGRlZmF1bHQgbWFpbmxpbmVcbiAgICAgKi9cbiAgICByZWFkb25seSBhZmZlY3RlZEJyYW5jaD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gZm9yIFRhcmdldERlcGVuZGVuY2llcy5cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvY29uZmlndXJhdGlvbi9wYWNrYWdlanNvbiN0YXJnZXQtZGVwZW5kZW5jaWVzXG4gICAgICovXG4gICAgcmVhZG9ubHkgdGFyZ2V0RGVwZW5kZW5jaWVzPzogVGFyZ2V0RGVwZW5kZW5jaWVzO1xuXG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBwYXR0ZXJucyB0byBpbmNsdWRlIGluIHRoZSAubnhpZ25vcmUgZmlsZS5cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvY29uZmlndXJhdGlvbi9wYWNrYWdlanNvbiNueGlnbm9yZVxuICAgICAqL1xuICAgIHJlYWRvbmx5IG54SWdub3JlPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBSZWFkIG9ubHkgYWNjZXNzIHRva2VuIGlmIGVuYWJsaW5nIG54IGNsb3VkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IG54Q2xvdWRSZWFkT25seUFjY2Vzc1Rva2VuPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB0aGUgbGlzdCBvZiB0YXJnZXRzL29wZXJhdGlvbnMgdGhhdCBhcmUgY2FjaGVkIGJ5IE54XG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBbXCJidWlsZFwiLCBcInRlc3RcIl1cbiAgICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L3JlZmVyZW5jZS9ueC1qc29uI3Rhc2tzLXJ1bm5lci1vcHRpb25zXG4gICAgICovXG4gICAgcmVhZG9ubHkgY2FjaGVhYmxlT3BlcmF0aW9ucz86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogTmFtZWQgaW5wdXRzXG4gICAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvbngtanNvbiNpbnB1dHMtJi1uYW1lZGlucHV0c1xuICAgICAqL1xuICAgIHJlYWRvbmx5IG5hbWVkSW5wdXRzPzogTmFtZWRJbnB1dHM7XG5cbiAgICAvKipcbiAgICAgKiBUYXJnZXQgZGVmYXVsdHNcbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvcmVmZXJlbmNlL254LWpzb24jdGFyZ2V0LWRlZmF1bHRzXG4gICAgICovXG4gICAgcmVhZG9ubHkgdGFyZ2V0RGVmYXVsdHM/OiBUYXJnZXREZWZhdWx0cztcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgUHJvamVjdENvbmZpZyB7XG4gICAgLyoqXG4gICAgICogTmFtZWQgaW5wdXRzXG4gICAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvbngtanNvbiNpbnB1dHMtJi1uYW1lZGlucHV0c1xuICAgICAqL1xuICAgIHJlYWRvbmx5IG5hbWVkSW5wdXRzPzogTmFtZWRJbnB1dHM7XG5cbiAgICAvKipcbiAgICAgKiBUYXJnZXRzIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBAc2VlIGh0dHBzOi8vbnguZGV2L3JlZmVyZW5jZS9wcm9qZWN0LWNvbmZpZ3VyYXRpb25cbiAgICAgKi9cbiAgICByZWFkb25seSB0YXJnZXRzPzogUHJvamVjdFRhcmdldHM7XG5cbiAgICAvKipcbiAgICAgKiBQcm9qZWN0IHRhZyBhbm5vdGF0aW9uc1xuICAgICAqXG4gICAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvcHJvamVjdC1jb25maWd1cmF0aW9uI3RhZ3NcbiAgICAgKi9cbiAgICByZWFkb25seSB0YWdzPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBJbXBsaWNpdCBkZXBlbmRlbmNpZXNcbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9ueC5kZXYvcmVmZXJlbmNlL3Byb2plY3QtY29uZmlndXJhdGlvbiNpbXBsaWNpdGRlcGVuZGVuY2llc1xuICAgICAqL1xuICAgIHJlYWRvbmx5IGltcGxpY2l0RGVwZW5kZW5jaWVzPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdCBsaXN0IG9mIHNjcmlwdHMgZm9yIE54IHRvIGluY2x1ZGUuXG4gICAgICogQHNlZSBodHRwczovL254LmRldi9yZWZlcmVuY2UvcHJvamVjdC1jb25maWd1cmF0aW9uI2lnbm9yaW5nLXBhY2thZ2UuanNvbi1zY3JpcHRzXG4gICAgICovXG4gICAgcmVhZG9ubHkgaW5jbHVkZWRTY3JpcHRzPzogc3RyaW5nW107XG4gIH1cbn1cbiJdfQ==
\ No newline at end of file
diff --git a/scripts/pnpm/link-bundled-transitive-deps.ts b/scripts/pnpm/link-bundled-transitive-deps.ts
new file mode 100644
index 0000000000000000000000000000000000000000..b4ba437c0b5000e9892cf2f15b7ea40c60ebcfe2
--- /dev/null
+++ b/scripts/pnpm/link-bundled-transitive-deps.ts
@@ -0,0 +1,90 @@
+#!/usr/bin/env ts-node
+/*! Copyright [Amazon.com](http://amazon.com/), Inc. or its affiliates. All Rights Reserved.
+SPDX-License-Identifier: Apache-2.0 */
+import * as path from "node:path";
+import * as fs from "fs-extra";
+import * as SemVer from "semver";
+import { buildDependenciesHierarchy, PackageNode } from "@pnpm/reviewing.dependencies-hierarchy";
+
+async function linkBundledTransitiveDeps(workspaceDir: string, pkgFolder: string) {
+  const pkgDir = path.join(workspaceDir, pkgFolder);
+  const pkgJson = require(path.join(pkgDir, "package.json"));
+  const bundledDeps: string[] = pkgJson.bundledDependencies || [];
+  if (!bundledDeps.length) {
+    // No bundled deps
+    return;
+  }
+
+  const dependencyHierarchy = (await buildDependenciesHierarchy([pkgDir], {
+    depth: Number.MAX_SAFE_INTEGER,
+    lockfileDir: workspaceDir,
+    include: {
+      optionalDependencies: false,
+      dependencies: true,
+      devDependencies: false,
+    },
+  }))[pkgDir];
+
+  const transitiveDeps: Record<string, PackageNode> = {};
+
+  function visit(_deps?: PackageNode[]) {
+    if (_deps == null || !_deps.length) {
+      return;
+    }
+
+    _deps.forEach((_dep) => {
+      if (_dep.resolved == null || _dep.isMissing || _dep.version.startsWith("link:")) {
+        // Unresolved / unsaved dependency
+        return;
+      }
+
+      // record the transitive dep with resolved path to symlink
+      const _existing = transitiveDeps[_dep.alias];
+      // Use the latest version of transitive deps only
+      // TODO: Can we support multiple versions of transitive deps, and should we?
+      if (!_existing || SemVer.gt(_dep.version, _existing.version)) {
+        transitiveDeps[_dep.alias] = _dep;
+
+        // traverse
+        visit(_dep.dependencies);
+      }
+    })
+  }
+
+  for (const _bundledDepName of bundledDeps) {
+    const _bundledDep = (dependencyHierarchy.dependencies || []).find((v) => v.alias === _bundledDepName);
+    if (_bundledDep == null) {
+      throw new Error(`Package ${pkgJson.name} bundled dependency "${_bundledDepName}" is missing dependency declaration.`)
+    }
+
+    visit(_bundledDep.dependencies);
+  }
+
+  // create symlink for each transitive dep in package node_modules
+  for (const [name, dep] of Object.entries(transitiveDeps)) {
+    const _dest = path.join(pkgDir, "node_modules", name);
+    if (!(await fs.pathExists(_dest))) {
+      if (!(await fs.pathExists(dep.path))) {
+        console.warn(dep);
+        throw new Error(`Pnpm dependency path not found: ${dep.path}`);
+      }
+
+      await fs.createSymlink(dep.path, _dest, "dir");
+    }
+  }
+
+  console.info(`Package "${pkgFolder}" transitive bundled dependencies are linked:`, Object.keys(transitiveDeps).sort().join(", "));
+}
+
+(async () => {
+  const [,,pkgFolder] = process.argv;
+
+  if (pkgFolder == null) {
+    throw new Error(`Missing pkgDir arg`)
+  }
+
+  linkBundledTransitiveDeps(
+    require("nx/src/utils/workspace-root").workspaceRoot,
+    pkgFolder,
+  )
+})();